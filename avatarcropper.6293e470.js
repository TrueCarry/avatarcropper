parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"IZ+N":[function(require,module,exports) {
"use strict";function e(e,t){void 0===t&&(t="");var n=document.createElement(e);return n.className=t,n}function t(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(e.indexOf("Trident/")>0){var n=e.indexOf("rv:");return parseInt(e.substring(n+3,e.indexOf(".",n)),10)}var r=e.indexOf("Edge/");return r>0&&parseInt(e.substring(r+5,e.indexOf(".",r)),10)}function n(e,t){if(void 0===t&&(t=!0),t){["optimizeSpeed","crisp-edges","-moz-crisp-edges","-webkit-optimize-contrast","optimize-contrast","pixelated"].forEach(function(t){return e.style["image-rendering"]=t})}else e.style["image-rendering"]=""}function r(e,t){var n=document.createElement("option");return n.innerText=e,n.value=t,n}function i(e){e.style.display="none"}function o(e){e.style.display=""}function s(e,t){void 0===t&&(t=!1);var n=e.getBoundingClientRect().height,r=e.offsetTop,i=r+n,o=e.parentElement,s=o.getBoundingClientRect().height,a=o.scrollTop;return t?!(a+s<=r||a>=i):!(a+s<i||a>r)}function a(e,t){var n=e.getBoundingClientRect().height,r=e.offsetTop,i=r+n,o=e.parentElement,s=o.getBoundingClientRect().height;o.scrollHeight;switch(t){case"top":o.scrollTop=r;break;case"center":o.scrollTop=s/2-n/2;break;case"bottom":o.scrollTop=i-s}}function l(e,t,n){s(e,n)||a(e,t)}function u(e,t){return!(t.length>e.length)&&e.substr(e.length-t.length)===t}function p(){}function c(e,t){return-1!==e.indexOf(t)}function f(e,t){var n=e.indexOf(t);return-1!==n?(e.splice(n,1),{item:t,index:n,existed:!0}):{item:t,index:-1,existed:!1}}function d(e,t){for(var n,r=[];-1!==(n=e.indexOf(t));)r.push(n),e.splice(n,1);return{item:t,indexes:r,existed:r.length>0}}function x(e,t){return t>=e.length?e[t%e.length]:t<0?e[e.length- -t%e.length]:e[t]}function g(e,t){return-1!==t?{item:e.splice(t,1)[0],index:t,existed:!0}:{item:null,index:-1,existed:!1}}function m(e,t,n){if("number"==typeof n)return e.splice(n,0,t),{item:t,index:n};for(var r=0;r<e.length;r++)if(n(t,e[r]))return e.splice(r,0,t),{item:t,index:r};return e.push(t),{item:t,index:e.length-1}}function h(e){return e.slice()}function y(e){var t=0,n=0,r=null;for(t=e.length-1;t>0;t-=1)n=Math.floor(Math.random()*(t+1)),r=e[t],e[t]=e[n],e[n]=r}function v(e,t){return m(e,t,Math.floor(Math.random()*(e.length+1)))}function _(e){return e[e.length-1]}function b(e,t,n){"number"!=typeof t&&(t=e.indexOf(t)),"number"!=typeof n&&(n=e.indexOf(n));var r=e[t];e[t]=e[n],e[n]=r}function O(e){e.stopPropagation()}function E(e){return"rgb("+~~(255*(e<.5?1:1-2*(e-.5)))+","+~~(255*(e<.5?2*e:1))+","+~~(255*(e>.5?2*(e-.5):0))+")"}function w(){return Date.now()}function T(e){return e>0?1:e<0?-1:0}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createElement=e,exports.getIEVersion=t,exports.makePixelated=n,exports.createOptionElement=r,exports.hideElement=i,exports.showElement=o,exports.element_isScrolledTo=s,exports.element_scrollIntoView=a,exports.element_scrollIntoViewIfNeeded=l,exports.endsWith=u,exports.emptyFn=p,exports.array_contains=c,exports.array_remove=f,exports.array_remove_all=d,exports.array_item_at=x,exports.array_remove_at=g,exports.array_insert=m,exports.array_copy=h,exports.array_shuffle=y,exports.array_insert_random=v,exports.array_last=_,exports.array_swap=b,exports.stopProp=O,exports.getRainbowColor=E,exports.getCurrentMs=w,exports.sign=T;
},{}],"Topp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./util"),t=function(){function t(){this.events=new Map}return t.prototype.createEvent=function(e){this.events.has(e)||this.events.set(e,[])},t.prototype.emitEvent=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.events.has(e)||(console.warn("event not yet created: "+e),this.events.set(e,[])),this.events.get(e).forEach(function(e){return e.fn.apply(e,t)})},t.prototype.on=function(e,t,n){void 0===n&&(n="[unidentified]"),this.events.has(e)||(console.warn("event not yet created: "+e),this.events.set(e,[])),this.events.get(e).push({fn:t,id:n})},t.prototype.once=function(t,n,s){var o=this;void 0===s&&(s="[unidentified oneshot]"),this.events.has(t)||(console.warn("event not yet created: "+t),this.events.set(t,[]));var i={fn:function(){n(),e.array_remove(o.events.get(t),i)},id:s};this.events.get(t).push(i)},t.prototype.debugEvent=function(e){this.events.has(e)||(console.warn("event not yet created: "+e),this.events.set(e,[])),console.log("ids registered to event `"+e+"`:"),this.events.get(e).forEach(function(e){return console.log(e.id)})},t}();exports.EventClass=t,exports.GlobalEvents=new t;
},{"./util":"IZ+N"}],"rcaU":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function o(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0});var n=require("./util"),e=require("./eventclass"),o=function(e){function o(t){var o=e.call(this)||this;return o.container=t?"string"==typeof t?n.createElement("div",t):t:n.createElement("div"),o.contentContainer=o.container,o}return t(o,e),o.prototype.show=function(){this.container.style.display=""},o.prototype.hide=function(){this.container.style.display="none"},Object.defineProperty(o.prototype,"innerHTML",{get:function(){return this.contentContainer.innerHTML},set:function(t){this.contentContainer.innerHTML=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"innerText",{get:function(){return this.contentContainer.innerText},set:function(t){this.contentContainer.innerText=t},enumerable:!0,configurable:!0}),o.prototype.appendChild=function(){for(var t=this,n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(1===n.length)this.appendHelper(this.contentContainer,n[0]);else{var o=document.createDocumentFragment();n.forEach(function(n){t.appendHelper(o,n)}),this.contentContainer.appendChild(o)}},o.prototype.appendHelper=function(t,n){n instanceof HTMLElement?t.appendChild(n):n&&t.appendChild(n.container)},o.prototype.removeChild=function(t){return!!this.hasChild(t)&&(t instanceof HTMLElement?this.contentContainer.removeChild(t):this.contentContainer.removeChild(t.container),!0)},o.prototype.hasChild=function(t){return t instanceof HTMLElement?this.contentContainer.contains(t):this.contentContainer.contains(t.container)},o}(e.EventClass);exports.Widget=o;
},{"./util":"IZ+N","./eventclass":"Topp"}],"k5YS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./point"),i=function(){function i(t,i){this.position=t,this.size=i}return i.fromClientRect=function(e){return new i(new t.Point(e.left,e.top),t.Point.fromSizeLike(e))},i.prototype.expand=function(t){var i=this.copy(),e=i.size.times(t),o=i.center,n=e.minus(i.size);return i.position.subtract(n.dividedBy(2)),i.size.add(n),i.center=o,i},Object.defineProperty(i.prototype,"isSquare",{get:function(){return this.width===this.height},enumerable:!0,configurable:!0}),i.prototype.plus=function(t){return new i(this.position.plus(t.position),this.size.plus(t.size))},i.prototype.times=function(t){return"number"==typeof t?new i(this.position.times(t),this.size.times(t)):new i(this.position.times(t.position),this.size.times(t.size))},i.prototype.translated=function(t){return new i(this.position.plus(t),this.size.copy())},i.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.width+", "+this.height+")"},i.prototype.fitInside=function(t,i){var e=t.aspectRatio,o=this.getPointFromAnchor(i).copy();e>this.aspectRatio?(this.width*=t.height/this.height,this.height=t.height):(this.height*=t.width/this.width,this.width=t.width),this.setPointFromAnchor(i,o)},i.prototype.setWidthKeepAR=function(t){var i=this.width/t;this.width=t,this.height=this.height/i},i.prototype.setHeightKeepAR=function(t){var i=this.height/t;this.height=t,this.width=this.width/i},i.prototype.expandToward=function(t,i){switch(t){case"ne":var e=this.bottomLeft;this.size.multiply(i),this.bottomLeft=e;break;case"nw":var o=this.bottomRight;this.size.multiply(i),this.bottomRight=o;break;case"se":var n=this.topLeft;this.size.multiply(i),this.topLeft=n;break;case"sw":var s=this.topRight;this.size.multiply(i),this.topRight=s}},i.prototype.fitInsideGreedyCenter=function(t,i){var e=t.aspectRatio,o=this.center.copy();this.size.copy();e>1?(this.height*=t.width/this.width,this.width=t.width):(this.width*=t.height/this.height,this.height=t.height),this.center=o,i.containsRect(this)||(this.right>i.right&&(this.setWidthKeepAR(2*(i.right-o.x)),this.center=o),this.bottom>i.bottom&&(this.setHeightKeepAR(2*(i.bottom-o.y)),this.center=o),this.left<i.left&&(this.setWidthKeepAR(2*(o.x-i.left)),this.center=o),this.top<i.top&&(this.setHeightKeepAR(2*(o.y-i.top)),this.center=o))},i.prototype.fitInsideGreedy=function(t,i,e){var o=t.aspectRatio,n=this.getPointFromAnchor(i).copy();o>1?(this.height*=t.width/this.width,this.width=t.width):(this.width*=t.height/this.height,this.height=t.height),this.setPointFromAnchor(i,n),e.containsRect(this)||(this.right>e.right&&(this.setWidthKeepAR(e.right-this.left),this.setPointFromAnchor(i,n)),this.bottom>e.bottom&&(this.setHeightKeepAR(e.bottom-this.top),this.setPointFromAnchor(i,n)),this.left<e.left&&(this.setWidthKeepAR(this.right-e.left),this.setPointFromAnchor(i,n)),this.top<e.top&&(this.setHeightKeepAR(this.bottom-e.top),this.setPointFromAnchor(i,n)))},i.prototype.copy=function(){return new i(this.position.copy(),this.size.copy())},i.prototype.mirror=function(t){this.position=t.position,this.size=t.size},i.prototype.getPointFromAnchor=function(t){switch(t){case"nw":return this.topLeft;case"ne":return this.topRight;case"sw":return this.bottomLeft;case"se":return this.bottomRight}},i.prototype.setPointFromAnchor=function(t,i){switch(t){case"nw":this.topLeft=i;break;case"ne":this.topRight=i;break;case"sw":this.bottomLeft=i;break;case"se":this.bottomRight=i}},i.anchorOpposite=function(t){switch(t){case"nw":return"se";case"ne":return"sw";case"sw":return"ne";case"se":return"nw"}},Object.defineProperty(i.prototype,"aspectRatio",{get:function(){return this.width/this.height},enumerable:!0,configurable:!0}),i.prototype.round=function(t){if(void 0===t&&(t=!1),t){var i=this.center;this.size.round(),this.center=i.rounded}else this.position.round(),this.size.round()},Object.defineProperty(i.prototype,"rounded",{get:function(){return new i(this.position.rounded,this.size.rounded)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"local",{get:function(){return new i(new t.Point(0),this.size.copy())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"x",{get:function(){return this.position.x},set:function(t){this.position.x=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"y",{get:function(){return this.position.y},set:function(t){this.position.y=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"left",{get:function(){return this.position.x},set:function(t){this.position.x=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"top",{get:function(){return this.position.y},set:function(t){this.position.y=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"width",{get:function(){return this.size.x},set:function(t){this.size.x=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this.size.y},set:function(t){this.size.y=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"right",{get:function(){return this.x+this.width},set:function(t){this.x=t-this.width},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bottom",{get:function(){return this.y+this.height},set:function(t){this.y=t-this.height},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"topLeft",{get:function(){return this.position},set:function(t){this.position=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"topRight",{get:function(){return this.position.plus(new t.Point(this.width,0))},set:function(i){this.position=i.minus(new t.Point(this.width,0))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bottomLeft",{get:function(){return this.position.plus(new t.Point(0,this.height))},set:function(i){this.position=i.minus(new t.Point(0,this.height))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bottomRight",{get:function(){return this.position.plus(this.size)},set:function(t){this.position=t.minus(this.size)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"center",{get:function(){return this.position.plus(this.size.times(.5))},set:function(t){this.position=t.minus(this.size.times(.5))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cx",{get:function(){return this.center.x},set:function(t){this.position.x=t-this.size.x/2},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"cy",{get:function(){return this.center.y},set:function(t){this.position.y=t-this.size.y/2},enumerable:!0,configurable:!0}),i.prototype.containsPoint=function(t){return t.x>=this.x&&t.x<=this.right&&t.y>=this.y&&t.y<=this.bottom},i.prototype.containsRect=function(t){return this.containsPoint(t.topLeft)&&this.containsPoint(t.bottomRight)},i.prototype.intersects=function(t){return!(t.left>=this.right||t.right<=this.left||t.top>=this.bottom||t.bottom<=this.top)},i.between=function(e,o){return new i(new t.Point(Math.min(e.x,o.x),Math.min(e.y,o.y)),new t.Point(Math.abs(e.x-o.x),Math.abs(e.y-o.y)))},i}();exports.Rectangle=i;
},{"./point":"mHi6"}],"mHi6":[function(require,module,exports) {
"use strict";var t=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],u=0,s=o.length;u<s;u++,i++)r[i]=o[u];return r};Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./rectangle"),n=function(){function n(t,e){void 0===t?(this.x=0,this.y=0):void 0===e?(this.x=t,this.y=t):(this.x=t,this.y=e)}return n.fromSizeLike=function(t){return new n(t.width,t.height)},n.fromPointLike=function(t){return new n(t.x,t.y)},n.prototype.toRectangle=function(t){return new e.Rectangle(t||new n(0),this.copy())},Object.defineProperty(n.prototype,"xOnly",{get:function(){return new n(this.x,0)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"yOnly",{get:function(){return new n(0,this.y)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"unitX",{get:function(){return new n(this.x>0?1:-1,this.y/this.x)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"unitY",{get:function(){return new n(this.x/this.y,this.y>0?1:-1)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"inverted",{get:function(){return this.times(-1)},enumerable:!0,configurable:!0}),n.prototype.reverseByX=function(t){var e=this.unitX.inverted.times(t);this.x=e.x,this.y=e.y},n.prototype.reverseByY=function(t){var e=this.unitY.inverted.times(t);this.x=e.x,this.y=e.y},n.fromArray=function(e){return new(n.bind.apply(n,t([void 0],e)))},n.fromIndex=function(t,e){return new n(t%e,~~(t/e))},n.prototype.equals=function(t){return this.x===t.x&&this.y===t.y},n.prototype.copy=function(){return new n(this.x,this.y)},n.prototype.round=function(){this.x=Math.round(this.x),this.y=Math.round(this.y)},Object.defineProperty(n.prototype,"rounded",{get:function(){return new n(Math.round(this.x),Math.round(this.y))},enumerable:!0,configurable:!0}),n.prototype.times=function(t){var e=this.copy();return e.multiply(t),e},n.prototype.multiply=function(t){t instanceof n?(this.x*=t.x,this.y*=t.y):(this.x*=t,this.y*=t)},n.prototype.dividedBy=function(t){var e=this.copy();return e.divideBy(t),e},n.prototype.divideBy=function(t){t instanceof n?(this.x/=t.x,this.y/=t.y):(this.x/=t,this.y/=t)},n.prototype.plus=function(t){var e=this.copy();return e.add(t),e},n.prototype.add=function(t){t instanceof n?(this.x+=t.x,this.y+=t.y):(this.x+=t,this.y+=t)},n.prototype.minus=function(t){var e=this.copy();return e.subtract(t),e},n.prototype.subtract=function(t){t instanceof n?(this.x-=t.x,this.y-=t.y):(this.x-=t,this.y-=t)},Object.defineProperty(n.prototype,"squared",{get:function(){return this.times(this)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"sum",{get:function(){return this.x+this.y},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"min",{get:function(){return Math.min(this.x,this.y)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"max",{get:function(){return Math.max(this.x,this.y)},enumerable:!0,configurable:!0}),n.prototype.distanceTo=function(t){return Math.sqrt(this.minus(t).squared.sum)},n.prototype.toString=function(){return"("+this.x+", "+this.y+")"},n.prototype.toArray=function(){return[this.x,this.y]},n}();exports.Point=n;
},{"./rectangle":"k5YS"}],"LfTY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./point"),e=require("./util"),o=require("./rectangle"),i=function(){function i(e){void 0===e&&(e={}),(e=e||{}).canvasElement?"string"==typeof e.canvasElement&&(e.canvasElement=document.querySelector(e.canvasElement)):e.canvasElement=document.createElement("canvas"),this.canvas=e.canvasElement,this.context=this.canvas.getContext("2d",{alpha:!e.opaque}),e.size=e.size||new t.Point(1),this.resize(e.size,!1),this.translation=new t.Point(0),this.align={horizontal:e.align&&e.align.horizontal||!1,vertical:e.align&&e.align.vertical||!1},this.align.horizontal||this.align.vertical||(this.canvas.style.transformOrigin="top left"),this.usingDeepCalc=e.deepCalc||!1,this.pixelated=e.pixelated||!1,this.usingDeepCalc&&(this.deepCalcPosition(),window.addEventListener("resize",this.deepCalcPosition)),this.mouse={isDown:!1,lastPos:null,originalPos:{x:-1,y:-1},events:{move:[],down:[],up:[],leave:[]}},this.canvas.addEventListener("mousemove",this.mouseMove.bind(this)),this.canvas.addEventListener("touchmove",this.mouseMove.bind(this)),this.canvas.addEventListener("mousedown",this.mouseDown.bind(this)),this.canvas.addEventListener("touchstart",this.mouseDown.bind(this)),this.canvas.addEventListener("mouseup",this.mouseUp.bind(this)),this.canvas.addEventListener("touchend",this.mouseUp.bind(this)),this.canvas.addEventListener("mouseleave",this.mouseLeave.bind(this)),this.canvas.addEventListener("touchcancel",this.mouseLeave.bind(this))}return i.prototype.addEventListener=function(t,o){e.array_contains(["mouseup","mousedown","mousemove","mouseleave"],t)&&this.mouse.events[t.substr(5)].push(o)},i.prototype.resize=function(e,o){var i;o&&(i=this.canvas.cloneNode()),this.canvas.width=e.x,this.canvas.height=e.y,o&&this.drawImage(i,new t.Point(0))},i.prototype.zoom=function(t){var e,o;"number"==typeof t?(e=t,o=t):(e=t.x,o=t.y),this.canvas.style.transform="scale("+e+", "+o+")"},i.prototype.zoomToFit=function(t){var e=t.x/this.width,o=t.y/this.height;e<o?this.zoom(e):this.zoom(o)},i.prototype.scale=function(t){return this.zoom(t)},i.prototype.clear=function(){this.context.clearRect(-this.translation.x,-this.translation.y,this.canvas.width,this.canvas.height)},i.prototype.deepCalcPosition=function(){for(var e,o=this.canvas,i=0,n=0;o&&!isNaN(o.offsetLeft)&&!isNaN(o.offsetTop);)e=window.getComputedStyle(o,null),i+=o.offsetLeft-o.scrollLeft+(e?parseInt(e.getPropertyValue("border-left-width"),10):0),n+=o.offsetTop-o.scrollTop+(e?parseInt(e.getPropertyValue("border-top-width"),10):0),o=o.offsetParent;this.offset=new t.Point(i,n)},i.prototype.posFromEvent=function(e){var o=new t.Point;o=e instanceof MouseEvent?new t.Point(e.pageX,e.pageY):new t.Point(e.changedTouches[0].pageX,e.changedTouches[0].pageY),this.usingDeepCalc&&this.deepCalcPosition();var i=this.canvas.getBoundingClientRect(),n=this.usingDeepCalc?this.offset.copy():new t.Point(i.left,i.top);return this.align.horizontal&&n.x>0&&(n.x=(2*n.x-i.width)/2),this.align.vertical&&n.y>0&&(n.y=(2*n.y-i.height)/2),o.subtract(n),o.multiply(this.size.dividedBy(new t.Point(i.width,i.height))),o},Object.defineProperty(i.prototype,"size",{get:function(){return new t.Point(this.canvas.width,this.canvas.height)},enumerable:!0,configurable:!0}),i.prototype.mouseMove=function(t){var e=this,o=this.posFromEvent(t);this.mouse.lastPos||(this.mouse.lastPos=o),this.mouse.isDown||(this.mouse.originalPos=o),this.mouse.events.move.forEach(function(i){!1!==i.call(e,o.x,o.y,e.mouse.isDown,e.mouse.lastPos.x,e.mouse.lastPos.y,e.mouse.originalPos.x,e.mouse.originalPos.y,t)&&(e.mouse.lastPos=o)})},i.prototype.mouseDown=function(t){var e=this,o=this.posFromEvent(t);this.mouse.isDown=!0,this.mouse.lastPos=o,this.mouse.originalPos=o,this.mouse.events.down.forEach(function(i){i.call(e,o.x,o.y,t)})},i.prototype.mouseUp=function(t){var e=this,o=this.posFromEvent(t);this.mouse.isDown=!1,this.mouse.events.up.forEach(function(i){i.call(e,o.x,o.y,e.mouse.originalPos.x,e.mouse.originalPos.y,t)}),this.mouse.lastPos=o},i.prototype.mouseLeave=function(t){var e=this,o=this.posFromEvent(t);this.mouse.events.leave.forEach(function(i){i.call(e,o.x,o.y,t)})},Object.defineProperty(i.prototype,"pixelated",{set:function(t){var e=this;t=!t;var o=this.context;if(o.mozImageSmoothingEnabled=t,o.webkitImageSmoothingEnabled=t,o.imageSmoothingEnabled=t,t)this.canvas.style["image-rendering"]="";else{["optimizeSpeed","crisp-edges","-moz-crisp-edges","-webkit-optimize-contrast","optimize-contrast","pixelated"].forEach(function(t){return e.canvas.style["image-rendering"]=t})}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"width",{get:function(){return this.canvas.width},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this.canvas.height},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"opacity",{get:function(){return this.context.globalAlpha},set:function(t){this.context.globalAlpha=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"color",{get:function(){return this.context.fillStyle},set:function(t){void 0!==t&&(this.context.fillStyle=t,this.context.strokeStyle=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"font",{get:function(){return this.context.font},set:function(t){void 0!==t&&(this.context.font=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lineWidth",{get:function(){return this.context.lineWidth},set:function(t){void 0!==t&&(this.context.lineWidth=t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"blendMode",{get:function(){return this.context.globalCompositeOperation},set:function(t){this.context.globalCompositeOperation=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lineDash",{get:function(){return this.context.getLineDash()},set:function(t){this.context.setLineDash(t)},enumerable:!0,configurable:!0}),i.prototype.createBlob=function(t,e){this.canvas.toBlob(function(e){t(e)},e)},i.prototype.createImage=function(t,e,o){void 0===o&&(o=!0),this.canvas.toBlob(function(e){var i=new Image;i.onload=function(){t(i),i.onload=null,o&&URL.revokeObjectURL(i.src)};var n=URL.createObjectURL(e);i.src=n},e)},Object.defineProperty(i.prototype,"imageData",{get:function(){return this.context.getImageData(0,0,this.width,this.height)},enumerable:!0,configurable:!0}),i.prototype.drawImage=function(e,o){e instanceof i&&(e=e.canvas),o instanceof t.Point?this.context.drawImage(e,o.x,o.y):this.context.drawImage(e,o.x,o.y,o.width,o.height)},i.prototype.drawCroppedImage=function(e,o,n){e instanceof i&&(e=e.canvas),o instanceof t.Point?this.context.drawImage(e,n.x,n.y,n.width,n.height,o.x,o.y,n.width,n.height):this.context.drawImage(e,n.x,n.y,n.width,n.height,o.x,o.y,o.width,o.height)},i.prototype.drawRotatedCroppedImage=function(e,o,n,s,a){e instanceof i&&(e=e.canvas);var h=this.context;h.save(),h.translate(s.x+n.x,s.y+n.y),h.rotate(o),s instanceof t.Point?h.drawImage(e,a.x,a.y,a.width,a.height,-n.x,-n.y,e.width,e.height):h.drawImage(e,a.x,a.y,a.width,a.height,-n.x,-n.y,s.width,s.height),h.restore()},i.prototype.fillWithImage=function(e,o){o&&this.resize(new t.Point(e.width,e.height),!1),this.drawImage(e,new t.Point(0))},i.prototype.drawLine=function(t,e,o,i){this.color=o,this.lineWidth=i,this.context.beginPath(),this.context.moveTo(t.x,t.y),this.context.lineTo(e.x,e.y),this.context.stroke()},i.prototype.drawRect=function(e,o,i,n){void 0===n&&(n=!0),this.color=o,this.lineWidth=i,n&&(e=e.translated(new t.Point(.5))),this.context.strokeRect(e.x,e.y,e.width,e.height)},i.prototype.fillRect=function(t,e){this.color=e,this.context.fillRect(t.x,t.y,t.width,t.height)},i.prototype.drawRoundedRect=function(e,o,i,n,s){void 0===s&&(s=!0),this.color=i,this.lineWidth=n,s&&(e=e.translated(new t.Point(.5))),e.width<2*o&&(o=e.width/2),e.height<2*o&&(o=e.height/2),this.context.beginPath(),this.context.moveTo(e.x+o,e.y),this.context.arcTo(e.right,e.y,e.right,e.bottom,o),this.context.arcTo(e.right,e.bottom,e.x,e.bottom,o),this.context.arcTo(e.x,e.bottom,e.x,e.y,o),this.context.arcTo(e.x,e.y,e.right,e.y,o),this.context.closePath(),this.context.stroke()},i.prototype.fillRoundedRect=function(e,o,i,n){void 0===n&&(n=!0),this.color=i,n&&(e=e.translated(new t.Point(.5))),e.width<2*o&&(o=e.width/2),e.height<2*o&&(o=e.height/2),this.context.beginPath(),this.context.moveTo(e.x+o,e.y),this.context.arcTo(e.right,e.y,e.right,e.bottom,o),this.context.arcTo(e.right,e.bottom,e.x,e.bottom,o),this.context.arcTo(e.x,e.bottom,e.x,e.y,o),this.context.arcTo(e.x,e.y,e.right,e.y,o),this.context.closePath(),this.context.fill()},i.prototype.fill=function(e){this.fillRect(new o.Rectangle(new t.Point(0),this.size),e)},i.prototype.fillText=function(t,e,o,i,n,s){this.color=o,s&&(this.font=s),i&&(this.context.textBaseline=i),n&&(this.context.textAlign=n),this.context.fillText(t,e.x,e.y)},i.prototype.fillCircle=function(t,e,o){this.color=o,this.context.beginPath(),this.context.arc(t.x,t.y,e,0,2*Math.PI,!1),this.context.fill()},i.prototype.fillCircleInSquare=function(t,e,o){this.color=o,this.context.beginPath(),this.context.arc(t.x+e/2,t.y+e/2,e/2,0,2*Math.PI,!1),this.context.fill()},i.prototype.drawCircleInSquare=function(t,e,o,i){this.color=o,this.lineWidth=i,this.context.beginPath(),this.context.arc(t.x+e/2,t.y+e/2,e/2,0,2*Math.PI,!1),this.context.stroke()},i.prototype.fillCircleInRect=function(t,e){if(t.isSquare)return this.fillCircleInSquare(t.position,t.width,e);this.color=e,this.context.beginPath(),this.context.ellipse(t.x,t.y,t.width/2,t.height/2,0,0,2*Math.PI),this.context.fill()},i.prototype.drawCircleInRect=function(t,e,o){if(t.isSquare)return this.drawCircleInSquare(t.position,t.width,e,o);this.color=e,this.lineWidth=o,this.context.beginPath(),this.context.ellipse(t.x,t.y,t.width/2,t.height/2,0,0,2*Math.PI),this.context.stroke()},i.prototype.drawRotatedImage=function(e,o,n){var s,a;e instanceof i&&(e=e.canvas),n instanceof t.Point?(s=e.width,a=e.height):(s=n.width,a=n.height),this.context.save(),this.context.translate(n.x+s/2,n.y+a/2),this.context.rotate(o),this.context.drawImage(e,-s/2,-a/2,s,a),this.context.restore()},i.fileToImage=function(t,e,o){void 0===o&&(o=!0);var i=new Image;i.onload=function(){e(i),o&&window.URL.revokeObjectURL(i.src)},i.src=window.URL.createObjectURL(t)},i}();exports.Canvas=i,HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(t,e,o){var i=this;setTimeout(function(){for(var n=atob(i.toDataURL(e,o).split(",")[1]),s=n.length,a=new Uint8Array(s),h=0;h<s;h++)a[h]=n.charCodeAt(h);t(new Blob([a],{type:e||"image/png"}))})}});
},{"./point":"mHi6","./util":"IZ+N","./rectangle":"k5YS"}],"EQ0G":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(r,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(r,t)};return function(r,t){function o(){this.constructor=r}e(r,t),r.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./widget"),t=require("./util"),o=function(r){function o(){var e=r.call(this,t.createElement("div","progressBar"))||this;return e.progressElement=t.createElement("div","progress"),e.progressElement.style.height="100%",e.progress=0,e.appendChild(e.progressElement),e}return e(o,r),Object.defineProperty(o.prototype,"progress",{get:function(){return this._progress},set:function(e){this._progress=e,this.progressElement.style.width=100*e+"%"},enumerable:!0,configurable:!0}),o}(r.Widget);exports.ProgressBar=o;
},{"./widget":"rcaU","./util":"IZ+N"}],"PEpB":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(r,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])})(r,o)};return function(r,o){function n(){this.constructor=r}t(r,o),r.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./progressbar"),o=function(r){function o(){var t=r.call(this)||this;return t.fractionParts=[],t.totalFractions=0,t}return t(o,r),o.prototype.addFractionPart=function(t,r){this.fractionParts.push({fractionsOfWhole:t,internalSteps:r,counter:0}),this.totalFractions+=t},o.prototype.step=function(){this.fractionParts.length>0&&(this.fractionParts[0].counter++,this.progress+=1/this.fractionParts[0].internalSteps*this.fractionParts[0].fractionsOfWhole,this.fractionParts[0].counter===this.fractionParts[0].internalSteps&&this.fractionParts.shift())},o.prototype.reset=function(){this.fractionParts=[],this.progress=0},o}(r.ProgressBar);exports.FractionalProgressBar=o;
},{"./progressbar":"EQ0G"}],"VtDY":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./widget"),o=require("./util"),n=function(e){function n(){var t=e.call(this,"dialog-backdrop")||this;return t.dialog=o.createElement("div","dialog"),t.dialog.addEventListener("click",o.stopProp),t.container.appendChild(t.dialog),t.contentContainer=t.dialog,t.container.addEventListener("click",function(){t.hide()}),t.hide(),t}return t(n,e),n.prototype.show=function(){e.prototype.show.call(this),this.contentContainer.scrollTop=0},n}(e.Widget);exports.Dialog=n;
},{"./widget":"rcaU","./util":"IZ+N"}],"0ggN":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./dialog"),n=require("./util"),r=function(e){function r(){var t=e.call(this)||this;t.dialog.classList.add("closable");var r=n.createElement("div","close");return r.innerText="❌",r.addEventListener("click",function(){t.hide()}),t.appendChild(r),t.innerContent=n.createElement("div","innerContent"),t.appendChild(t.innerContent),t.contentContainer=t.innerContent,t}return t(r,e),r}(e.Dialog);exports.ClosableDialog=r;
},{"./dialog":"VtDY","./util":"IZ+N"}],"UvFA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./eventclass"),t=require("./point"),o=function(){function o(){}return Object.defineProperty(o,"current",{get:function(){return this.types[this.type]},enumerable:!0,configurable:!0}),Object.defineProperty(o,"type",{get:function(){return this._type},set:function(t){this._type=t,e.GlobalEvents.emitEvent("borderchange")},enumerable:!0,configurable:!0}),Object.defineProperty(o,"size",{get:function(){return this._size},set:function(t){this._size=t,e.GlobalEvents.emitEvent("borderchange")},enumerable:!0,configurable:!0}),o.apply=function(e){if(e.clear(),"none"!==this.type&&this.size>0){var t=this.current.p1.times(e.size),o=this.current.p2.times(e.size),n=e.context.createLinearGradient(t.x,t.y,o.x,o.y);this.current.gradient.forEach(function(e){n.addColorStop(e.pos,e.color)}),e.context.fillStyle=n,e.context.fillRect(0,0,e.width,e.height),e.blendMode="destination-out",e.fillCircleInRect(e.size.toRectangle().expand(1-this.size),"white"),e.blendMode="source-over"}},o.types={none:{text:"No Border",p1:new t.Point(0),p2:new t.Point(0),gradient:[]},lgbt:{text:"LGBT Pride",p1:new t.Point(.5,0),p2:new t.Point(.5,1),gradient:[{pos:0,color:"#FF0018"},{pos:.2,color:"#FFA52C"},{pos:.4,color:"#FFFF41"},{pos:.6,color:"#008018"},{pos:.8,color:"#0000F9"},{pos:1,color:"#86007D"}]},trans:{text:"Trans Pride",p1:new t.Point(.5,0),p2:new t.Point(.5,1),gradient:[{pos:0,color:"#55CDFC"},{pos:.25,color:"#F7A8B8"},{pos:.5,color:"#FFFFFF"},{pos:.75,color:"#F7A8B8"},{pos:1,color:"#55CDFC"}]},nonbinary:{text:"Nonbinary Pride",p1:new t.Point(.5,0),p2:new t.Point(.5,1),gradient:[{pos:0,color:"#FFF430"},{pos:1/3,color:"#FFFFFF"},{pos:2/3,color:"#9C59D1"},{pos:1,color:"#000000"}]}},o._type="none",o._size=.05,o}();exports.Border=o;
},{"./eventclass":"Topp","./point":"mHi6"}],"QJQk":[function(require,module,exports) {
var define;
var e;function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(n,r){"function"==typeof e&&e.amd?e([],r):"object"===("undefined"==typeof exports?"undefined":t(exports))?module.exports=r():n.SuperGif=r()}(this,function(){var e=!1,t=null,n=function(e){return e.reduce(function(e,t){return 2*e+t},0)},r=function(e){for(var t=[],n=7;n>=0;n--)t.push(!!(e&1<<n));return t},o=function(e){this.data=e,this.len=this.data.length,this.pos=0,this.readByte=function(){if(this.pos>=this.data.length)throw new Error("Attempted to read past end of stream.");return e instanceof Uint8Array?e[this.pos++]:255&e.charCodeAt(this.pos++)},this.readBytes=function(e){for(var t=[],n=0;n<e;n++)t.push(this.readByte());return t},this.read=function(e){for(var t="",n=0;n<e;n++)t+=String.fromCharCode(this.readByte());return t},this.readUnsigned=function(){var e=this.readBytes(2);return(e[1]<<8)+e[0]}},i=function(o,i){i||(i={});var a=function(e){for(var t=[],n=0;n<e;n++)t.push(o.readBytes(3));return t},l=function(){var e,t;t="";do{e=o.readByte(),t+=o.read(e)}while(0!==e);return t},s=function(e){e.leftPos=o.readUnsigned(),e.topPos=o.readUnsigned(),e.width=o.readUnsigned(),e.height=o.readUnsigned();var t=r(o.readByte());e.lctFlag=t.shift(),e.interlaced=t.shift(),e.sorted=t.shift(),e.reserved=t.splice(0,2),e.lctSize=n(t.splice(0,3)),e.lctFlag&&(e.lct=a(1<<e.lctSize+1)),e.lzwMinCodeSize=o.readByte();var s=l();e.pixels=function(e,t){for(var n,r,o=0,i=function(e){for(var n=0,r=0;r<e;r++)t.charCodeAt(o>>3)&1<<(7&o)&&(n|=1<<r),o++;return n},a=[],l=1<<e,s=l+1,c=e+1,u=[],d=function(){u=[],c=e+1;for(var t=0;t<l;t++)u[t]=[t];u[l]=[],u[s]=null};;)if(r=n,(n=i(c))!==l){if(n===s)break;if(n<u.length)r!==l&&u.push(u[r].concat(u[n][0]));else{if(n!==u.length)throw new Error("Invalid LZW code.");u.push(u[r].concat(u[r][0]))}a.push.apply(a,u[n]),u.length===1<<c&&c<12&&c++}else d();return a}(e.lzwMinCodeSize,s),e.interlaced&&(e.pixels=function(e,t){for(var n=new Array(e.length),r=e.length/t,o=function(r,o){var i=e.slice(o*t,(o+1)*t);n.splice.apply(n,[r*t,t].concat(i))},i=[0,4,2,1],a=[8,8,4,2],l=0,s=0;s<4;s++)for(var c=i[s];c<r;c+=a[s])o(c,l),l++;return n}(e.pixels,e.width)),i.img&&i.img(e)},c=function a(){var c={};switch(c.sentinel=o.readByte(),String.fromCharCode(c.sentinel)){case"!":c.type="ext",function(e){switch(e.label=o.readByte(),e.label){case 249:e.extType="gce",function(e){o.readByte();var t=r(o.readByte());e.reserved=t.splice(0,3),e.disposalMethod=n(t.splice(0,3)),e.userInput=t.shift(),e.transparencyGiven=t.shift(),e.delayTime=o.readUnsigned(),e.transparencyIndex=o.readByte(),e.terminator=o.readByte(),i.gce&&i.gce(e)}(e);break;case 254:e.extType="com",function(e){e.comment=l(),i.com&&i.com(e)}(e);break;case 1:e.extType="pte",function(e){o.readByte(),e.ptHeader=o.readBytes(12),e.ptData=l(),i.pte&&i.pte(e)}(e);break;case 255:e.extType="app",function(e){switch(o.readByte(),e.identifier=o.read(8),e.authCode=o.read(3),e.identifier){case"NETSCAPE":!function(e){o.readByte(),e.unknown=o.readByte(),e.iterations=o.readUnsigned(),e.terminator=o.readByte(),i.app&&i.app.NETSCAPE&&i.app.NETSCAPE(e)}(e);break;default:!function(e){e.appData=l(),i.app&&i.app[e.identifier]&&i.app[e.identifier](e)}(e)}}(e);break;default:e.extType="unknown",function(e){e.data=l(),i.unknown&&i.unknown(e)}(e)}}(c);break;case",":c.type="img",s(c);break;case";":c.type="eof",i.eof&&i.eof(c);break;default:throw new Error("Unknown block: 0x"+c.sentinel.toString(16))}if(e)return t&&t(),void(e=!1);"eof"!==c.type&&setTimeout(a,0)};!function(){var e={};if(e.sig=o.read(3),e.ver=o.read(3),"GIF"!==e.sig)throw new Error("Not a GIF file.");e.width=o.readUnsigned(),e.height=o.readUnsigned();var t=r(o.readByte());e.gctFlag=t.shift(),e.colorRes=n(t.splice(0,3)),e.sorted=t.shift(),e.gctSize=n(t.splice(0,3)),e.bgColor=o.readByte(),e.pixelAspectRatio=o.readByte(),e.gctFlag&&(e.gct=a(1<<e.gctSize+1)),i.hdr&&i.hdr(e)}(),setTimeout(c,0)};return function(n){var r,a,l={vp_l:0,vp_t:0,vp_w:null,vp_h:null,c_w:null,c_h:null};for(var s in n)l[s]=n[s];l.vp_w&&l.vp_h&&(l.is_vp=!0);var c=null,u=!1,d=null,h=null,p=null,f=null,g=null,y=null,_=null,w=!0,m=!1,v=[],b=[],x=l.gif;void 0===l.auto_play&&(l.auto_play=!x.getAttribute("rel:auto_play")||"1"==x.getAttribute("rel:auto_play"));var T,B,C,S,P=l.hasOwnProperty("on_end")?l.on_end:null,k=l.hasOwnProperty("loop_delay")?l.loop_delay:0,A=l.hasOwnProperty("loop_mode")?l.loop_mode:"auto",E=!l.hasOwnProperty("draw_while_loading")||l.draw_while_loading,I=!!E&&(!l.hasOwnProperty("show_progress_bar")||l.show_progress_bar),U=l.hasOwnProperty("progressbar_height")?l.progressbar_height:25,O=l.hasOwnProperty("progressbar_background_color")?l.progressbar_background_color:"rgba(255,255,255,0.4)",R=l.hasOwnProperty("progressbar_foreground_color")?l.progressbar_foreground_color:"rgba(255,0,22,.8)",z=function(){d=null,h=null,g=p,p=null,y=null},N=function(){try{i(r,L)}catch(e){M("parse")}},D=function(e,t){T.width=e*X(),T.height=t*X(),C.style.minWidth=e*X()+"px",S.width=e,S.height=t,S.style.width=e+"px",S.style.height=t+"px",S.getContext("2d").setTransform(1,0,0,1,0,0)},F=function(e,t,n){if(n&&I){var r,o,i,a=U;l.is_vp?m?(o=(l.vp_t+l.vp_h-a)/X(),a/=X(),r=l.vp_l/X()+e/t*(l.vp_w/X()),i=T.width/X()):(o=l.vp_t+l.vp_h-a,a=a,r=l.vp_l+e/t*l.vp_w,i=T.width):(o=(T.height-a)/(m?X():1),r=e/t*T.width/(m?X():1),i=T.width/(m?X():1),a/=m?X():1),B.fillStyle=O,B.fillRect(r,o,i-r,a),B.fillStyle=R,B.fillRect(0,o,r,a)}},M=function(e){c=e,a={width:x.width,height:x.height},v=[],B.fillStyle="black",B.fillRect(0,0,l.c_w?l.c_w:a.width,l.c_h?l.c_h:a.height),B.strokeStyle="red",B.lineWidth=3,B.moveTo(0,0),B.lineTo(l.c_w?l.c_w:a.width,l.c_h?l.c_h:a.height),B.moveTo(0,l.c_h?l.c_h:a.height),B.lineTo(l.c_w?l.c_w:a.width,0),B.stroke()},G=function(){y&&(v.push({data:y.getImageData(0,0,a.width,a.height),delay:h}),b.push({x:0,y:0}))},j=function(){var e,t,n,r=-1,o=0,i=function(e){r+=e,s()},a=(e=!1,t=function(){null!==P&&P(x),o++,!1!==A||o<0?n():(e=!1,w=!1)},n=function n(){if(e=w){i(1);var o=10*v[r].delay;o||(o=100),0==(r+1+v.length)%v.length?(o+=k,setTimeout(t,o)):setTimeout(n,o)}},function(){e||setTimeout(n,0)}),s=function(){var e;(r=parseInt(r,10))>v.length-1&&(r=0),r<0&&(r=0),e=b[r],S.getContext("2d").putImageData(v[r].data,e.x,e.y),B.globalCompositeOperation="copy",B.drawImage(S,0,0)};return{init:function(){c||(l.c_w&&l.c_h||B.scale(X(),X()),l.auto_play?a():(r=0,s()))},step:a,play:function(){w=!0,a()},pause:function(){w=!1},playing:w,move_relative:i,current_frame:function(){return r},frames:function(){return v},length:function(){return v.length},move_to:function(e){r=e,s()}}}(),W=function(e){F(r.pos,r.data.length,e)},H=function(){},q=function(e,t){return function(n){e(n),W(t)}},L={hdr:q(function(e){D((a=e).width,a.height)}),gce:q(function(e){G(),z(),d=e.transparencyGiven?e.transparencyIndex:null,h=e.delayTime,p=e.disposalMethod}),com:q(H),app:{NETSCAPE:q(H)},img:q(function(e){y||(y=S.getContext("2d"));var t=v.length,n=e.lctFlag?e.lct:a.gct;t>0&&(3===g?null!==f?y.putImageData(v[f].data,0,0):y.clearRect(_.leftPos,_.topPos,_.width,_.height):f=t-1,2===g&&y.clearRect(_.leftPos,_.topPos,_.width,_.height));var r=y.getImageData(e.leftPos,e.topPos,e.width,e.height);e.pixels.forEach(function(e,t){e!==d&&(r.data[4*t+0]=n[e][0],r.data[4*t+1]=n[e][1],r.data[4*t+2]=n[e][2],r.data[4*t+3]=255)}),y.putImageData(r,e.leftPos,e.topPos),m||(B.scale(X(),X()),m=!0),E&&(B.drawImage(S,0,0),E=l.auto_play),_=e},!0),eof:function(e){G(),W(!1),l.c_w&&l.c_h||(T.width=a.width*X(),T.height=a.height*X()),j.init(),u=!1,J&&J(x)}},V=function(){var e=x.parentNode,t=document.createElement("div");T=document.createElement("canvas"),B=T.getContext("2d"),C=document.createElement("div"),S=document.createElement("canvas"),t.width=T.width=x.width,t.height=T.height=x.height,C.style.minWidth=x.width+"px",t.className="jsgif",C.className="jsgif_toolbar",t.appendChild(T),t.appendChild(C),e&&(e.insertBefore(t,x),e.removeChild(x)),l.c_w&&l.c_h&&D(l.c_w,l.c_h),Z=!0},X=function(){return l.max_width&&a&&a.width>l.max_width?l.max_width/a.width:1},Z=!1,J=!1,K=function(e){return!u&&(J=e||!1,u=!0,v=[],z(),f=null,g=null,y=null,_=null,!0)};return{play:j.play,pause:j.pause,move_relative:j.move_relative,move_to:j.move_to,get_frames:function(){return j.frames()},get_playing:function(){return w},get_canvas:function(){return T},get_canvas_scale:function(){return X()},get_loading:function(){return u},get_auto_play:function(){return l.auto_play},get_length:function(){return j.length()},get_current_frame:function(){return j.current_frame()},load_url:function(n,i,a,l){if(K(i)){t=l,e=!1;var s=new XMLHttpRequest;s.open("GET",n,!0),"overrideMimeType"in s?s.overrideMimeType("text/plain; charset=x-user-defined"):"responseType"in s?s.responseType="arraybuffer":s.setRequestHeader("Accept-Charset","x-user-defined"),s.onloadstart=function(){Z||V()},s.onload=function(e){200!=this.status&&M("xhr - response"),"response"in this||(this.response=new VBArray(this.responseText).toArray().map(String.fromCharCode).join(""));var t=this.response;t.toString().indexOf("ArrayBuffer")>0&&(t=new Uint8Array(t)),r=new o(t),setTimeout(N,0)},s.onprogress=function(e){e.lengthComputable&&F(e.loaded,e.total,!0),a&&a(e)},s.onerror=function(){M("xhr")},s.send()}},load:function(e,t,n){this.load_url(x.getAttribute("rel:animated_src")||x.src,e,t,n)},load_raw:function(e,t){K(t)&&(Z||V(),r=new o(e),setTimeout(N,0))},abort:function(){e=!0},set_frame_offset:function(e,t){b[e]?(void 0!==t.x&&(b[e].x=t.x),void 0!==t.y&&(b[e].y=t.y)):b[e]=t}}}});
},{}],"nzUD":[function(require,module,exports) {
var define;
var global = arguments[3];
var e,t=arguments[3];function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(r){if("object"===("undefined"==typeof exports?"undefined":n(exports))&&"undefined"!=typeof module)module.exports=r();else if("function"==typeof e&&e.amd)e([],r);else{("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:this).GIF=r()}}(function(){return function e(t,n,r){function i(o,a){if(!n[o]){if(!t[o]){var h="function"==typeof require&&require;if(!a&&h)return h(o,!0);if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return i(n||e)},f,f.exports,e,t,n,r)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,r){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function s(e){return"function"==typeof e}function o(e){return"object"===n(e)&&null!==e}function a(e){return void 0===e}t.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},i.prototype.emit=function(e){var t,n,r,i,h,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var f=new Error('Uncaught, unspecified "error" event. ('+t+")");throw f.context=t,f}if(a(n=this._events[e]))return!1;if(s(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),n.apply(this,i)}else if(o(n))for(i=Array.prototype.slice.call(arguments,1),r=(l=n.slice()).length,h=0;h<r;h++)l[h].apply(this,i);return!0},i.prototype.addListener=function(e,t){var n;if(!s(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,s(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(n=a(this._maxListeners)?i.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(e,t){if(!s(t))throw TypeError("listener must be a function");var n=!1;function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}return r.listener=t,this.on(e,r),this},i.prototype.removeListener=function(e,t){var n,r,i,a;if(!s(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(i=(n=this._events[e]).length,r=-1,n===t||s(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(a=i;a-- >0;)if(n[a]===t||n[a].listener&&n[a].listener===t){r=a;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},i.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(s(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},i.prototype.listeners=function(e){return this._events&&this._events[e]?s(this._events[e])?[this._events[e]]:this._events[e].slice():[]},i.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(s(t))return 1;if(t)return t.length}return 0},i.listenerCount=function(e,t){return e.listenerCount(t)}},{}],2:[function(e,t,n){var r,i,s,o,a;a=navigator.userAgent.toLowerCase(),o=navigator.platform.toLowerCase(),s="ie"===(r=a.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0])[1]&&document.documentMode,(i={name:"version"===r[1]?r[3]:r[1],version:s||parseFloat("opera"===r[1]&&r[4]?r[4]:r[2]),platform:{name:a.match(/ip(?:ad|od|hone)/)?"ios":(a.match(/(?:webos|android)/)||o.match(/mac|win|linux/)||["other"])[0]}})[i.name]=!0,i[i.name+parseInt(i.version,10)]=!0,i.platform[i.platform.name]=!0,t.exports=i},{}],3:[function(e,t,n){var r,i,s,o={}.hasOwnProperty,a=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},h=[].slice;r=e("events").EventEmitter,s=e("./browser.coffee"),i=function(e){var t,n;function i(e){var n,r,i;for(r in this.running=!1,this.options={},this.frames=[],this.freeWorkers=[],this.activeWorkers=[],this.setOptions(e),t)i=t[r],null==(n=this.options)[r]&&(n[r]=i)}return function(e,t){for(var n in t)o.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype}(i,r),t={workerScript:"gif.worker.js",workers:2,repeat:0,background:"#00ff00",quality:10,width:null,height:null,transparent:65280,debug:!1,dither:!1},n={delay:500,copy:!1},i.prototype.setOption=function(e,t){if(this.options[e]=t,null!=this._canvas&&("width"===e||"height"===e))return this._canvas[e]=t},i.prototype.setOptions=function(e){var t,n,r;for(t in n=[],e)o.call(e,t)&&(r=e[t],n.push(this.setOption(t,r)));return n},i.prototype.addFrame=function(e,t){var r,i;for(i in null==t&&(t={}),(r={}).transparent=this.options.transparent,n)r[i]=t[i]||n[i];if(null==this.options.width&&this.setOption("width",e.width),null==this.options.height&&this.setOption("height",e.height),"undefined"!=typeof ImageData&&null!==ImageData&&e instanceof ImageData)r.data=e.data;else if("undefined"!=typeof CanvasRenderingContext2D&&null!==CanvasRenderingContext2D&&e instanceof CanvasRenderingContext2D||"undefined"!=typeof WebGLRenderingContext&&null!==WebGLRenderingContext&&e instanceof WebGLRenderingContext)t.copy?r.data=this.getContextData(e):r.context=e;else{if(null==e.childNodes)throw new Error("Invalid image");if(t.copy){var s=this.getImageData(e);r.data=s.data,r.transparent=s.transparent}else r.image=e}return this.frames.push(r)},i.prototype.render=function(){var e,t,n;if(this.running)throw new Error("Already running");if(null==this.options.width||null==this.options.height)throw new Error("Width and height must be set prior to rendering");if(this.running=!0,this.nextFrame=0,this.finishedFrames=0,this.imageParts=function(){var e,t,n;for(n=[],e=0,t=this.frames.length;0<=t?e<t:e>t;0<=t?++e:--e)n.push(null);return n}.call(this),t=this.spawnWorkers(),!0===this.options.globalPalette)this.renderNextFrame();else for(e=0,n=t;0<=n?e<n:e>n;0<=n?++e:--e)this.renderNextFrame();return this.emit("start"),this.emit("progress",0)},i.prototype.abort=function(){return this.activeWorkers.forEach(function(e){e.terminate()}),this.activeWorkers=[],this.freeWorkers.forEach(function(e){e.terminate()}),this.freeWorkers=[],this.running=!1,this.emit("abort")},i.prototype.spawnWorkers=function(){var e,t,n,r;return e=Math.min(this.options.workers,this.frames.length),function(){n=[];for(var r=t=this.freeWorkers.length;t<=e?r<e:r>e;t<=e?r++:r--)n.push(r);return n}.apply(this).forEach((r=this,function(e){var t;return r.log("spawning worker "+e),(t=new Worker(r.options.workerScript)).onmessage=function(e){return r.activeWorkers.splice(r.activeWorkers.indexOf(t),1),r.freeWorkers.push(t),r.frameFinished(e.data)},r.freeWorkers.push(t)})),e},i.prototype.frameFinished=function(e){var t,n;if(this.log("frame "+e.index+" finished - "+this.activeWorkers.length+" active"),this.finishedFrames++,this.emit("progress",this.finishedFrames/this.frames.length),this.imageParts[e.index]=e,!0===this.options.globalPalette&&(this.options.globalPalette=e.globalPalette,this.log("global palette analyzed"),this.frames.length>2))for(t=1,n=this.freeWorkers.length;1<=n?t<n:t>n;1<=n?++t:--t)this.renderNextFrame();return a.call(this.imageParts,null)>=0?this.renderNextFrame():this.finishRendering()},i.prototype.finishRendering=function(){var e,t,n,r,i,s,o,a,h,l,f,u,p,c,d,v;for(a=0,i=0,h=(c=this.imageParts).length;i<h;i++)a+=((t=c[i]).data.length-1)*t.pageSize+t.cursor;for(a+=t.pageSize-t.cursor,this.log("rendering finished - filesize "+Math.round(a/1e3)+"kb"),e=new Uint8Array(a),u=0,s=0,l=(d=this.imageParts).length;s<l;s++)for(n=o=0,f=(v=(t=d[s]).data).length;o<f;n=++o)p=v[n],e.set(p,u),n===t.data.length-1?u+=t.cursor:u+=t.pageSize;return r=new Blob([e],{type:"image/gif"}),this.activeWorkers.forEach(function(e){e.terminate()}),this.activeWorkers=[],this.freeWorkers.forEach(function(e){e.terminate()}),this.freeWorkers=[],this.emit("finished",r,e)},i.prototype.renderNextFrame=function(){var e,t,n;if(0!==this.freeWorkers.length&&!(this.nextFrame>=this.frames.length))return e=this.frames[this.nextFrame++],n=this.freeWorkers.shift(),t=this.getTask(e),this.log("starting frame "+(t.index+1)+" of "+this.frames.length),this.activeWorkers.push(n),n.postMessage(t)},i.prototype.getContextData=function(e){return e.getImageData(0,0,this.options.width,this.options.height).data},i.prototype.getImageData=function(e){var t;null==this._canvas&&(this._canvas=document.createElement("canvas"),this._canvas.width=this.options.width,this._canvas.height=this.options.height),t=this._canvas.getContext("2d");var n=[];void 0===window.colors&&(window.colors=[]),t.clearRect(0,0,this._canvas.width,this._canvas.height),t.drawImage(e,0,0);for(var r=this.getContextData(t),i=0,s=!1,o=0,a=0,h=0;h<r.length;h+=4){var l=r[h+0]<<16|r[h+1]<<8|r[h+2];o+=r[h+1],a+=(r[h]+r[h+2])/2,-1===n.indexOf(l)&&n.push(l),-1===window.colors.indexOf(l)&&window.colors.push(l),255!==r[h+3]&&(s=!0)}return s&&(i=o<a?65280:16711935),t.fillStyle="#"+i.toString(16).padStart(6,"0"),t.fillRect(0,0,this.options.width,this.options.height),t.drawImage(e,0,0),{data:this.getContextData(t),transparent:s?i:null}},i.prototype.getTask=function(e){var t,n;if(n={index:t=this.frames.indexOf(e),last:t===this.frames.length-1,delay:e.delay,transparent:e.transparent,width:this.options.width,height:this.options.height,quality:this.options.quality,dither:this.options.dither,globalPalette:this.options.globalPalette,repeat:this.options.repeat,canTransfer:"chrome"===s.name},null!=e.data)n.data=e.data;else if(null!=e.context)n.data=this.getContextData(e.context);else{if(null==e.image)throw new Error("Invalid frame");var r=this.getImageData(e.image);n.data=r.data,n.transparent=r.transparent}return n},i.prototype.log=function(){var e;if(e=1<=arguments.length?h.call(arguments,0):[],this.options.debug)return console.log.apply(console,e)},i}(),t.exports=i},{"./browser.coffee":2,events:1}]},{},[3])(3)});
},{}],"frZQ":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./util"),i=require("./fractionalprogressbar"),n=require("./canvas"),o=require("./closabledialog"),a=require("./point"),s=require("./borders"),l=t(require("./supergif.js")),d=t(require("./gif.js")),c=function(t){function o(e){var n=t.call(this)||this;return n.renderedString="Rendered! yayy",n.renderingString="Rendering...",n.shouldStopRendering=!1,n.currentlyRendering=!1,n.initialized=!1,n.dialog.classList.add("dialog-render"),n.createEvent("close"),n.cropView=e,n.headerElement=r.createElement("h1","header"),n.headerElement.innerText=n.renderingString,n.progressBar=new i.FractionalProgressBar,n.imageElement=r.createElement("img","image"),n.noteElement=r.createElement("div","note"),n.noteElement.innerText="Save as a square for Discord!!",n.pleaseWaitElement=r.createElement("div","pleaseWait"),n.pleaseWaitElement.innerText="Aborting render... please wait...",n.optionBar=r.createElement("div","optionBar"),n.saveButton=r.createElement("a","save"),n.saveButton.innerText="Save",n.saveButton.addEventListener("click",function(){n.saveButton.href=n.imageElement.src}),n.appendChild(n.headerElement,n.progressBar,n.imageElement,n.noteElement,n.pleaseWaitElement,n.optionBar,n.saveButton),n.initialized=!0,n}return e(o,t),o.prototype.render=function(){this.currentlyRendering=!0,this.shouldStopRendering=!1,this.show(),"gif"===this.cropView.currentFileType?this.renderGif():(this.getFrameURLs(this.cropView.image,!1,!0,this.display.bind(this)),this.currentlyRendering=!1)},o.prototype.renderGif=function(){var e=this,t=new l.default({gif:this.cropView.image.cloneNode()});this.loadGif=t;t.load(function(){e.loadGif=null,e.shouldStopRendering&&(e.currentlyRendering=!1,e.tryClose());var r=new d.default({workers:3,quality:1,dither:!1,width:e.cropView.cropArea.width,height:e.cropView.cropArea.height,debug:!1,copy:!0}),i=t.get_length();e.progressBar.addFractionPart(1/6,i);r.on("finished",function(t){var r=URL.createObjectURL(t);e.display([{label:"GIF",url:r}]),e.currentlyRendering=!1}),r.on("abort",function(){e.currentlyRendering=!1,e.tryClose()}),r.on("progress",function(t){e.progressBar.progress=1/6+5*t/6,e.shouldStopRendering&&r.abort()}),function n(o){t.move_to(o),e.getFrameURLs(t.get_canvas(),!0,!1,function(a){var s=new Image;s.addEventListener("load",function(){if(e.shouldStopRendering)return e.currentlyRendering=!1,void e.tryClose();r.addFrame(s,{delay:10*t.get_frames()[o].delay||10}),e.progressBar.step(),++o===i?r.render():n(o)}),s.src=a[0].url})}(0)},void 0,function(){e.loadGif=null,e.currentlyRendering=!1,e.tryClose()})},o.prototype.getFrameURLs=function(e,t,r,i){var o=[],l=r?2:1,d=0,c=function(e,t,r){d++,o[r]={url:e,label:t},d===l&&i(o)},p=new n.Canvas({size:this.cropView.cropArea.size,pixelated:t});s.Border.apply(p);var h=new n.Canvas({size:this.cropView.outerSize,pixelated:t});h.drawRotatedImage(e,this.cropView.rotation/180*Math.PI,this.cropView.outerSize.dividedBy(2).minus(this.cropView.innerSize.dividedBy(2)));var u=new n.Canvas({size:this.cropView.cropArea.size,pixelated:t});if(u.drawCroppedImage(h,new a.Point(0),this.cropView.cropArea),u.drawImage(p,new a.Point(0)),u.createBlob(function(e){c(URL.createObjectURL(e),"Square",0)}),r){var g=new n.Canvas({size:this.cropView.cropArea.size,pixelated:t});g.drawCroppedImage(h,new a.Point(0),this.cropView.cropArea),g.drawImage(p,new a.Point(0)),g.blendMode="destination-in",g.fillCircleInSquare(new a.Point(0),g.width,"white"),g.createBlob(function(e){c(URL.createObjectURL(e),"Circle",1)})}},o.prototype.display=function(e){var t,i=this;this.progressBar.hide(),r.showElement(this.optionBar),r.showElement(this.saveButton),this.headerElement.innerText=this.renderedString,this.optionBar.innerHTML="",e.forEach(function(n,o){var a=r.createElement("button","option");a.style.width=1/e.length*100+"%",a.innerText=n.label,a.url=n.url,a.addEventListener("click",function(){i.imageElement.src=n.url;for(var e=i.optionBar.children,t=0;t<e.length;t++)e[t].classList.remove("toggled");a.classList.add("toggled")}),i.optionBar.appendChild(a),0===o&&(t=a)}),this.imageElement.onload=function(){i.contentContainer.scrollTop=i.contentContainer.scrollHeight,i.imageElement.onload=null},t.click()},o.prototype.show=function(){this.progressBar.show(),this.progressBar.reset(),this.headerElement.innerText=this.renderingString,r.hideElement(this.optionBar),r.hideElement(this.saveButton),r.hideElement(this.pleaseWaitElement),this.imageElement.src="",this.saveButton.setAttribute("download",this.cropView.filename),r.makePixelated(this.imageElement,!this.cropView.antialias),t.prototype.show.call(this)},o.prototype.hide=function(e){void 0===e&&(e=!1),e||!this.initialized?t.prototype.hide.call(this):this.tryClose()},o.prototype.tryClose=function(){if(this.currentlyRendering)return this.shouldStopRendering=!0,this.loadGif&&this.loadGif.abort(),r.showElement(this.pleaseWaitElement),!1;for(var e=this.optionBar.children,t=0;t<e.length;t++)e[t].url&&URL.revokeObjectURL(e[t].url);return this.emitEvent("close"),this.hide(!0),!0},o}(o.ClosableDialog);exports.Renderer=c;
},{"./util":"IZ+N","./fractionalprogressbar":"PEpB","./canvas":"LfTY","./closabledialog":"0ggN","./point":"mHi6","./borders":"UvFA","./supergif.js":"QJQk","./gif.js":"nzUD"}],"g9Wi":[function(require,module,exports) {
"use strict";var n;Object.defineProperty(exports,"__esModule",{value:!0}),function(n){n[n.left=37]="left",n[n.up=38]="up",n[n.right=39]="right",n[n.down=40]="down"}(n=exports.Keys||(exports.Keys={}));var e=function(){function n(){}return n.initialize=function(){window.addEventListener("keydown",function(e){return n.keysDown[e.keyCode]=!0}),window.addEventListener("keyup",function(e){return n.keysDown[e.keyCode]=!1})},n.isDown=function(n){return this.keysDown[n]||!1},n.axis=function(n,e){return+this.isDown(n)-+this.isDown(e)},n.isArrowKey=function(n){return n>=37&&n<=40},n.keysDown={},n}();exports.KeyManager=e;
},{}],"4oNT":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./widget"),i=require("./util"),r=require("./canvas"),n=require("./renderer"),o=require("./point"),s=require("./rectangle"),c=require("./keymanager"),a=function(t){function i(e){var i=t.call(this,new o.Point,new o.Point)||this;return i.cropView=e,i.saveOrigin(),i}return e(i,t),Object.defineProperty(i.prototype,"radius",{get:function(){return this.size.dividedBy(2)},set:function(e){this.size=e.times(2)},enumerable:!0,configurable:!0}),i.prototype.reset=function(){this.position=new o.Point(0),this.size=new o.Point(this.cropView.outerRect.size.min/2)},Object.defineProperty(i.prototype,"rectangle",{get:function(){return this.copy()},enumerable:!0,configurable:!0}),i.prototype.saveOrigin=function(){this._origin=this.copy()},Object.defineProperty(i.prototype,"origin",{get:function(){return this._origin},enumerable:!0,configurable:!0}),i.prototype.validate=function(){var e=0;return this.width>this.cropView.outerSize.x&&(this.setWidthKeepAR(this.cropView.outerSize.x),e|=1),this.height>this.cropView.outerSize.y&&(this.setHeightKeepAR(this.cropView.outerSize.y),e|=2),this.x<0&&(this.x=0,e|=4),this.y<0&&(this.y=0,e|=8),this.bottom>this.cropView.outerSize.y&&(this.bottom=this.cropView.outerSize.y,e|=16),this.right>this.cropView.outerSize.x&&(this.right=this.cropView.outerSize.x,e|=32),e},i}(s.Rectangle),h=function(t){function h(e){var o=t.call(this,i.createElement("div","cropView"))||this;return o._isZoomFitted=!1,o._zoomFactor=1,o.currentRotation=0,o.loadingImage=!1,o.createEvent("update"),o.createEvent("imagechange"),o.createEvent("antialiaschange"),o.on("update",o.renderOverlay.bind(o)),o.once("update",function(){return console.log("sup")}),o.settings=e,o.circle=new a(o),o.renderer=new n.Renderer(o),o.image=i.createElement("img","image"),o.image.style.transformOrigin="top left",o.overlay=new r.Canvas({deepCalc:!0}),o.appendChild(o.image,o.overlay.canvas),document.body.appendChild(o.renderer.container),o.overlay.addEventListener("mousemove",o.mouseMove.bind(o)),o.overlay.addEventListener("mousedown",o.mouseDown.bind(o)),o.overlay.canvas.addEventListener("touchmove",function(e){"new"!==o.currentAction&&"none"!==o.currentAction&&e.preventDefault()}),document.body.addEventListener("mouseup",function(){var e=o.currentAction;o.currentAction="none","none"!==e&&o.refresh()}),document.body.addEventListener("touchend",function(){var e=o.currentAction;o.currentAction="none","none"!==e&&o.refresh()}),window.addEventListener("keydown",function(e){return o.handleKeypress(e.keyCode)}),o.antialias=o.settings.antialias,o}return e(h,t),h.prototype.handleKeypress=function(e){c.KeyManager.isArrowKey(e)&&(this.circle.x+=c.KeyManager.axis(c.Keys.right,c.Keys.left),this.circle.y+=c.KeyManager.axis(c.Keys.down,c.Keys.up),this.circle.validate(),this.refresh())},Object.defineProperty(h.prototype,"rotation",{get:function(){return this.currentRotation},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"cropArea",{get:function(){return this.circle.rectangle},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"zoomFactor",{get:function(){return this._zoomFactor},enumerable:!0,configurable:!0}),h.prototype.refresh=function(){this.emitEvent("update")},h.prototype.reactTMToRefresh=function(){this.isZoomFitted&&this.zoomFit()},h.prototype.renderOverlay=function(){1!==this.settings.maskOpacity&&this.overlay.clear(),0!==this.settings.maskOpacity&&(this.overlay.fill("rgba(0,0,0,"+this.settings.maskOpacity+")"),this.overlay.blendMode="destination-out","circle"===this.settings.previewMode?this.overlay.fillCircleInRect(this.circle,"white"):this.overlay.fillRect(this.circle,"white")),this.overlay.blendMode="source-over";var e=1+~~(1/this.zoomFactor);if(this.settings.outlinesEnabled){var t=e%2==1;this.overlay.lineDash=[Math.min(this.overlay.width,this.overlay.height)/100],"circle"===this.settings.previewMode&&this.overlay.drawCircleInRect(this.circle,"white",e),this.overlay.drawRect(new s.Rectangle(this.circle.position.minus(e),this.circle.size.plus(e)),"white",e,t)}this.settings.guidesEnabled&&(this.overlay.drawLine(this.circle.center,new o.Point(this.circle.cx,this.circle.bottom),"white",e),this.overlay.drawLine(this.circle.center,new o.Point(this.circle.cx,this.circle.top),"white",e),this.overlay.drawLine(this.circle.center,new o.Point(this.circle.right,this.circle.cy),"white",e),this.overlay.drawLine(this.circle.center,new o.Point(this.circle.left,this.circle.cy),"white",e),this.overlay.context.lineDashOffset=this.overlay.context.getLineDash()[0],this.overlay.drawLine(this.circle.center,new o.Point(this.circle.cx,this.circle.bottom),"cyan",e),this.overlay.drawLine(this.circle.center,new o.Point(this.circle.cx,this.circle.top),"cyan",e),this.overlay.drawLine(this.circle.center,new o.Point(this.circle.right,this.circle.cy),"cyan",e),this.overlay.drawLine(this.circle.center,new o.Point(this.circle.left,this.circle.cy),"cyan",e),this.overlay.context.lineDashOffset=0,this.overlay.drawLine(new o.Point(this.circle.cx-2*e,this.circle.cy),new o.Point(this.circle.cx+2*e,this.circle.cy),"cyan",e),this.overlay.drawLine(new o.Point(this.circle.cx,this.circle.cy-2*e),new o.Point(this.circle.cx,this.circle.cy+2*e),"cyan",e))},Object.defineProperty(h.prototype,"innerRect",{get:function(){return new s.Rectangle(new o.Point(0),this.innerSize)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"innerSize",{get:function(){return new o.Point(this.image.width,this.image.height)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"outerRect",{get:function(){return new s.Rectangle(new o.Point(0),this.outerSize)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"outerSize",{get:function(){return new o.Point(this.overlay.width,this.overlay.height)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"apparentSize",{get:function(){return o.Point.fromSizeLike(this.container.getBoundingClientRect())},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"isZoomFitted",{get:function(){return this._isZoomFitted},set:function(e){this._isZoomFitted=e,this.container.style.overflow=e?"hidden":""},enumerable:!0,configurable:!0}),h.prototype.zoom=function(e,t){void 0===t&&(t=!0);var i=this.container.scrollTop/this.container.scrollHeight;this.container.scrollLeft,this.container.scrollWidth;this.container.scrollTop=0,this.container.scrollLeft=0;var r="";-1!==this.image.style.transform.indexOf(" rotate")&&(r=this.image.style.transform.substr(this.image.style.transform.indexOf(" rotate"))),e=e||this.zoomFactor,this._zoomFactor=e,this.overlay.zoom(e),this.image.style.transform="scale("+e+","+e+")",this.image.style.transform+=r;var n=this.image.getBoundingClientRect();if(0!==n.left){var o=parseFloat(this.image.style.left||"0px");o-=n.left,this.image.style.left=o+"px"}if(0!==n.top){o=parseFloat(this.image.style.top||"0px");o-=n.top,this.image.style.top=o+"px"}t&&this.refresh(),this.container.scrollTop=i*this.container.scrollHeight,this.container.scrollLeft=i*this.contentContainer.scrollWidth},h.prototype.zoomIn=function(){this.isZoomFitted=!1,this.zoom(1.1*this.zoomFactor)},h.prototype.zoomOut=function(){this.isZoomFitted=!1,this.zoom(this.zoomFactor/1.1)},h.prototype.zoomFit=function(e,t){if(void 0===e&&(e=!0),void 0===t&&(t=!0),this.image&&(this.isZoomFitted||e)){this.isZoomFitted=!0;var i=this.container.getBoundingClientRect(),r=this.overlay.width,n=this.overlay.height,o=i.width/r,s=i.height/n,c=Math.min(o,s);this.zoom(c,t)}},h.prototype.rotate=function(e,t){void 0===t&&(t=!0);this.currentRotation;void 0===e&&(e=this.currentRotation),this.currentRotation=e,-1!==this.image.style.transform.indexOf(" rotate")&&(this.image.style.transform=this.image.style.transform.substr(0,this.image.style.transform.indexOf(" rotate")));var i=this.image.style.transform;this.image.style.left="0px",this.image.style.top="0px";var r=o.Point.fromSizeLike(this.image),n=o.Point.fromSizeLike(this.image.getBoundingClientRect());this.image.style.transform=i+" rotate("+e+"deg)";var c=s.Rectangle.fromClientRect(this.image.getBoundingClientRect()),a=c.topLeft.inverted.minus(new o.Point(this.container.scrollLeft,this.container.scrollTop));this.image.style.left=a.x+"px",this.image.style.top=a.y+"px",r.multiply(c.size.dividedBy(n)),this.overlay.resize(r,!1),this.zoomFit(!1,t),this.circle.validate(),t&&this.emitEvent("update")},Object.defineProperty(h.prototype,"antialias",{get:function(){return this.antialiased},set:function(e){i.makePixelated(this.image,!e),this.overlay.pixelated=!e,this.antialiased=e,this.emitEvent("antialiaschange",this.antialiased)},enumerable:!0,configurable:!0}),h.prototype.setImageFromFile=function(e){return!(!e||"image"!==e.type.split("/")[0]||this.loadingImage)&&(this.currentFileType="gif"===e.type.split("/")[1]?"gif":"png",this._filename=e.name.substring(0,e.name.lastIndexOf("."))+"_cropped."+this.currentFileType,this.loadingImage=!0,r.Canvas.fileToImage(e,this.setImageFromFileHelper.bind(this),!1),!0)},h.prototype.setImageFromFileHelper=function(e){this.image.src&&URL.revokeObjectURL(this.image.src),this.overlay.resize(o.Point.fromSizeLike(e),!1),this.overlay.clear(),this.image.width=e.width,this.image.height=e.height,this.image.src=e.src,this.circle.reset(),this.zoomFit(!0,!1),this.rotate(0,!1),this.emitEvent("imagechange",this.image.src),this.refresh(),this.loadingImage=!1},h.prototype.flipHorizontal=function(){var e=this,t=new r.Canvas({size:o.Point.fromSizeLike(this.image)});t.context.scale(-1,1),t.drawImage(this.image,new s.Rectangle(new o.Point(0),o.Point.fromSizeLike(this.image).times(new o.Point(-1,1)))),t.context.setTransform(1,0,0,1,0,0),this.loadingImage=!0,t.createImage(function(t){e.flipHelper(t,!0)},void 0,!1)},h.prototype.flipVertical=function(){var e=this,t=new r.Canvas({size:o.Point.fromSizeLike(this.image)});t.context.scale(1,-1),t.drawImage(this.image,new s.Rectangle(new o.Point(0),o.Point.fromSizeLike(this.image).times(new o.Point(1,-1)))),t.context.setTransform(1,0,0,1,0,0),this.loadingImage=!0,t.createImage(function(t){e.flipHelper(t,!1)},void 0,!1)},h.prototype.flipHelper=function(e,t){var i=this;this.image.src&&URL.revokeObjectURL(this.image.src),this.image.onload=function(){i.rotate(-i.rotation,!1),t?i.circle.cx=i.outerSize.x-i.circle.cx:i.circle.cy=i.outerSize.y-i.circle.cy,i.emitEvent("imagechange",i.image.src),i.refresh(),i.loadingImage=!1},this.image.src=e.src},h.prototype.renderCroppedImage=function(){this.renderer.render()},Object.defineProperty(h.prototype,"filename",{get:function(){return this._filename},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"src",{get:function(){return this.image.src||null},enumerable:!0,configurable:!0}),h.prototype.centerCropArea=function(){this.circle.center=this.outerRect.center,this.circle.validate(),this.refresh()},h.prototype.setCropSize=function(e){this.circle.size=new o.Point(e),this.circle.validate(),this.refresh()},h.prototype.getMouseAction=function(e,t){new o.Point(e,t);return this.circle.containsPoint(new o.Point(e,t))?this.circle.center.distanceTo(new o.Point(e,t))>=this.circle.radius.x?"resize":"move":"new"},h.prototype.mouseDown=function(e,t){var i=this.getMouseAction(e,t);this.currentAction=i,this.mouseOrigin=new o.Point(e,t),this.circle.saveOrigin(),this.resizeOffset=this.circle.getPointFromAnchor(this.getCircleAnchor(this.mouseOrigin)).minus(this.mouseOrigin)},h.prototype.mouseMove=function(e,t){var i=this.currentAction;if("none"===i&&(i=this.getMouseAction(e,t)),"move"===i)this.overlay.canvas.style.cursor="move";else if("resize"===i){var r=+(e<this.circle.cx)^+(t<this.circle.cy);this.overlay.canvas.style.cursor=r?"nesw-resize":"nwse-resize"}else this.overlay.canvas.style.cursor="default";if("none"!==this.currentAction){if("move"===this.currentAction){var n=new o.Point(e,t).minus(this.mouseOrigin);this.circle.position=this.circle.origin.position.plus(n),this.circle.validate(),this.mouseOrigin=new o.Point(e,t),this.circle.saveOrigin()}else"resize"===this.currentAction&&this.performResize(e,t);this.circle.round(this.settings.resizeLock),this.emitEvent("update")}},h.prototype.getCircleAnchor=function(e){var t=e.x,i=e.y;return t>this.circle.cx?i>this.circle.cy?"se":"ne":i>this.circle.cy?"sw":"nw"},h.prototype.performResize=function(e,t){var i=s.Rectangle.anchorOpposite(this.getCircleAnchor(new o.Point(e,t)));if(this.settings.resizeLock){(r=s.Rectangle.between(new o.Point(e,t).plus(this.resizeOffset),this.circle.center)).expandToward(i,2),this.circle.fitInsideGreedyCenter(r,this.outerRect),this.circle.validate()}else{this.resizeAnchor=this.circle.getPointFromAnchor(i).minus(this.resizeOffset);this.circle.size.copy();var r=s.Rectangle.between(new o.Point(e,t),this.resizeAnchor);this.circle.fitInsideGreedy(r,i,this.outerRect),this.circle.validate()}},h}(t.Widget);exports.CropView=h;
},{"./widget":"rcaU","./util":"IZ+N","./canvas":"LfTY","./renderer":"frZQ","./point":"mHi6","./rectangle":"k5YS","./keymanager":"g9Wi"}],"0iXO":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./widget"),i=require("./util"),n=require("./canvas"),o=require("./point"),a=require("./rectangle"),r=require("./borders"),s=require("./eventclass"),l=function(t){function l(e,a){var r=t.call(this,i.createElement("div","preview"))||this;return r.lastMode="none",r.createEvent("requestremove"),s.GlobalEvents.on("borderchange",function(){return r.applyGradient()}),r.cropView=a,r.cropView.on("update",r.update.bind(r)),r.cropView.on("imagechange",function(e){r.image.src=e}),r.cropView.on("antialiaschange",function(e){r.antialias=e}),r._size=e,r.container.style.width=e.x+"px",r.container.style.height=e.y+2+"px",r.container.style["z-index"]=-e,r.mask=new n.Canvas({size:e.plus(new o.Point(0,2))}),r.mask.canvas.className="mask",r.mask.canvas.style["z-index"]=2,r.mask.canvas.style.position="absolute",r.border=new n.Canvas({size:e}),r.border.canvas.className="border",r.border.canvas.style["z-index"]=1,r.border.canvas.style.position="absolute",r.image=i.createElement("img","image"),r.image.style.position="absolute",r.image.style["transform-origin"]="top left",a.src&&(r.image.src=a.src),r.image.style.position="absolute",e.equals(new o.Point(30))&&(r.onlineIndicator=new n.Canvas({size:new o.Point(14)}),r.onlineIndicator.fillCircleInSquare(new o.Point(0,0),14,"#2F3136"),r.onlineIndicator.fillCircleInSquare(new o.Point(2,2),10,"rgb(67,181,129)"),r.onlineIndicator.canvas.className="onlineIndicator"),r.bottomBar=i.createElement("div","bottomBar"),r.sizeDisplay=i.createElement("div","size"),r.sizeDisplay.innerText=e.x+"x"+e.y,r.container.title=r.sizeDisplay.innerText,r.removeButton=i.createElement("button","remove"),r.removeButton.innerText="✖",r.removeButton.addEventListener("click",function(){r.emitEvent("requestremove")}),r.bottomBar.appendChild(r.sizeDisplay),r.bottomBar.appendChild(r.removeButton),r.appendChild(r.image,r.mask.canvas,r.border.canvas,r.onlineIndicator&&r.onlineIndicator.canvas||null,r.bottomBar),r.container.addEventListener("mouseenter",function(){i.showElement(r.bottomBar)}),r.container.addEventListener("mouseleave",function(){i.hideElement(r.bottomBar)}),i.hideElement(r.bottomBar),r.antialias=!0,r}return e(l,t),Object.defineProperty(l.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),l.prototype.applyGradient=function(){r.Border.apply(this.border)},l.prototype.update=function(){this.cropView.settings.previewMode!==this.lastMode&&(this.lastMode=this.cropView.settings.previewMode,this.applyGradient(),"square"===this.lastMode?(this.mask.clear(),this.mask.fillRect(new a.Rectangle(new o.Point(0,this.size.y),new o.Point(this.size.x,2)),"#2F3136"),this.onlineIndicator&&i.hideElement(this.onlineIndicator.canvas)):(this.mask.fill("#2F3136"),this.mask.blendMode="destination-out",this.mask.fillCircleInRect(new a.Rectangle(new o.Point(0),this.size),"white"),this.mask.blendMode="source-over",this.onlineIndicator&&i.showElement(this.onlineIndicator.canvas)));var e=this.size.dividedBy(this.cropView.cropArea.size);this.image.style.transform="scale("+e.x+","+e.y+") rotate("+this.cropView.rotation+"deg)";var t=new o.Point(0);t.subtract(this.cropView.cropArea.position.times(e));var n=new o.Point(parseFloat(this.cropView.image.style.left||"0px"),parseFloat(this.cropView.image.style.top||"0px"));n.multiply(1/this.cropView.zoomFactor),t.add(n.times(e)),this.image.style.left=t.x+"px",this.image.style.top=t.y+"px"},Object.defineProperty(l.prototype,"antialias",{get:function(){return this.antialiased},set:function(e){i.makePixelated(this.image,!e),this.antialiased=e},enumerable:!0,configurable:!0}),l}(t.Widget);exports.Preview=l;
},{"./widget":"rcaU","./util":"IZ+N","./canvas":"LfTY","./point":"mHi6","./rectangle":"k5YS","./borders":"UvFA","./eventclass":"Topp"}],"C3jq":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./widget"),r=require("./preview"),i=require("./util"),n=function(t){function n(e){var r=t.call(this,i.createElement("div","previews"))||this;return r.previews=[],r.padding=16,r._size=0,r.createEvent("sizechange"),r.createEvent("sizeArrayChange"),r.cropView=e,r}return e(n,t),Object.defineProperty(n.prototype,"sizeArray",{get:function(){var e=[];return this.previews.forEach(function(t){e.push(t.size.x)}),e},enumerable:!0,configurable:!0}),n.prototype.addPreviewSize=function(e){var t=new r.Preview(e,this.cropView);t.on("requestremove",this.removePreview.bind(this,t)),t.container.style.position="absolute",this.appendChild(t),i.array_insert(this.previews,t,function(e,t){return e.size.y>t.size.y}),this.render(),t.update(),this.emitEvent("sizeArrayChange",this.sizeArray)},n.prototype.removePreview=function(e){i.array_remove(this.previews,e),this.removeChild(e),this.render(),this.emitEvent("sizeArrayChange",this.sizeArray)},Object.defineProperty(n.prototype,"width",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this.previews[0]?this.previews[0].size.y:0},enumerable:!0,configurable:!0}),n.prototype.render=function(){var e=this,t=this.padding;this.previews.forEach(function(r){r.container.style.right=t+"px",t+=r.size.x+e.padding}),this._size=t,this.emitEvent("sizechange",t)},n}(t.Widget);exports.Previews=n;
},{"./widget":"rcaU","./preview":"0iXO","./util":"IZ+N"}],"7caX":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function l(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(l.prototype=n.prototype,new l)}}();Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./widget"),n=require("./util"),l=function(t){function l(e,l,r,i,o){void 0===i&&(i=""),void 0===o&&(o="");var a=t.call(this,n.createElement("div","labelSlider "+o))||this;return a.createEvent("slide"),a.createEvent("change"),a.labelElement=n.createElement("div","labelSlider-label"),a.labelElement.innerText=i,a.labelElement.style.position="absolute",a.sliderElement=n.createElement("input","labelSlider-slider"),a.sliderElement.type="range",a.sliderElement.min=e.toString(),a.sliderElement.max=l.toString(),a.sliderElement.step=r.toString(),a.sliderElement.style.position="absolute",a.sliderElement.addEventListener("input",function(){a.emitEvent("slide",parseFloat(a.sliderElement.value))}),a.sliderElement.addEventListener("change",function(){a.emitEvent("change",parseFloat(a.sliderElement.value))}),a.appendChild(a.labelElement,a.sliderElement),a}return e(l,t),Object.defineProperty(l.prototype,"value",{get:function(){return parseFloat(this.sliderElement.value)},set:function(e){this.sliderElement.value=e.toString()},enumerable:!0,configurable:!0}),l}(t.Widget);exports.LabelSlider=l;
},{"./widget":"rcaU","./util":"IZ+N"}],"oWGo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=window;e.localStorage||(e.localStorage={getItem:function(e){return e&&this.hasOwnProperty(e)?unescape(document.cookie.replace(new RegExp("(?:^|.*;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*"),"$1")):null},key:function(e){return unescape(document.cookie.replace(/\s*\=(?:.(?!;))*$/,"").split(/\s*\=(?:[^;](?!;))*[^;]?;\s*/)[e])},setItem:function(e,t){e&&(document.cookie=escape(e)+"="+escape(t)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/",this.length=document.cookie.match(/\=/g).length)},length:0,removeItem:function(e){e&&this.hasOwnProperty(e)&&(document.cookie=escape(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/",this.length--)},hasOwnProperty:function(e){return new RegExp("(?:^|;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)}},e.localStorage.length=(document.cookie.match(/\=/g)||e.localStorage).length);var t={get:function(e,t){return void 0===t?JSON.parse(localStorage.getItem(e)):localStorage.hasOwnProperty(e)?JSON.parse(localStorage.getItem(e)):(localStorage.setItem(e,JSON.stringify(t)),t)},set:function(e,t){localStorage.setItem(e,JSON.stringify(t))},remove:function(e){localStorage.removeItem(e)},hasKey:function(e){return localStorage.hasOwnProperty(e)},clear:function(){localStorage.clear()}};exports.default=t;
},{}],"MEyH":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function r(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./util"),o=require("./closabledialog"),r=function(o){function r(){var e=o.call(this)||this;e.list={"October 2019":["Added borders for LGBT frends... more/custom borders coming soon"],"July 2019":["Added functionality for centering, setting size manually, and resize locking","Bug fixes and performance improvements"],"May 2019":["Made it so you can move the crop area pixel-by-pixel using arrow keys","Also I can't make it so you can just put a url of a pic without having a dedicated server which i don't got the munz for sorry"],"April 2019":["Changed mask to be pixel-accurate","Added option to show guidelines"],"February 2019":["rewrote the whole dang thing so its not all in one file anymore lol","flip image horizontally or vertically (gifs soon)","antialias toggle (won't affect rendering, which just crops the image directly)","online indicator preview for discord","bugfixes and quality of life improvements","please tell me if you find bugs they probably exist and please tell me how you made them happen"],"December 2018":["You can remove preview sizes now by clicking in the bottom-right area. The web site will also magically remember your preview sizes between visits.","Zoom-fit should be imperceptibly faster... also shouldn't show phantom scroll bars anymore"],"November 2018":["Rotation! Please let me know if u find any bugs with this."],"August 2018":["Helpful tutorial","Better Mask Outline","Updated Canvas Backend","Updated Preview Image Backend","So tell me if you find any weird bugs","Loading screen so you can't open a file before it's ready for you to"],"July 2018":["Drag & Drop support - thanx TheRebelG0d","New rendering where you can pick circle or square after rendering... revolutionary...","Zoom functionality","Other stuff probaly"],"June 2018":["bugfixes cool"],"May 2018":["GIF support!! wow did you know GIFs work on this ??? at least i hope they do"],Earlier:["other stuff"]},e.dialog.classList.add("dialog-whatsNew");var r=[],i=t.createElement("h1");i.innerText="What's New,,,",r.push(i);var n=function(e){var o=t.createElement("h2");o.innerText=e;var i=t.createElement("ul");a.list[e].forEach(function(e){var o=t.createElement("li");o.innerText=e,i.appendChild(o)}),r.push(o),r.push(i)},a=this;for(var s in e.list)n(s);return e.appendChild.apply(e,r),e}return e(r,o),r}(o.ClosableDialog);exports.WhatsNewDialog=r;
},{"./util":"IZ+N","./closabledialog":"0ggN"}],"z2EL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PRIVACYPOLICY="tl;dr = i use google analytics to see how many people use the site, including how many people use a certain browser, whether people use desktops or phones, etc to help me get an idea of what to focus on when developing/testing the site\n\nmy awesome Privacy Policy\n\nThis Privacy Policy describes how your personal information is collected, used, and shared when you visit https://songsing.github.io/avatarcropper/ (the “Site”).\n\nPERSONAL INFORMATION WE COLLECT\n\nWhen you visit the Site, we automatically collect certain information about your device, including information about your web browser, and some of the cookies that are installed on your device. Additionally, as you browse the Site, we collect information about the individual web pages that you view (on the Site), what websites or search terms referred you to the Site, and information about how you interact with the Site. We refer to this automatically-collected information as “Device Information.”\n\nWe collect Device Information using the following technologies:\n\n    - “Cookies” are data files that are placed on your device or computer and often include an anonymous unique identifier. For more information about cookies, and how to disable cookies, visit http://www.allaboutcookies.org.\n    - “Log files” track actions occurring on the Site, and collect data including your browser type, Internet service provider, referring/exit pages, and date/time stamps.\n    - “Web beacons,” “tags,” and “pixels” are electronic files used to record information about how you browse the Site.\n\nHOW DO WE USE YOUR PERSONAL INFORMATION?\n\ni just like to see how many users on the site\n\nSHARING YOUR PERSONAL INFORMATION\n\ni use google analytics\nyou can read more about how Google uses your Personal Information here:  https://www.google.com/intl/en/policies/privacy/.  You can also opt-out of Google Analytics here:  https://tools.google.com/dlpage/gaoptout.\n\nFinally, we may also share your Personal Information to comply with applicable laws and regulations, to respond to a subpoena, search warrant or other lawful request for information we receive, or to otherwise protect our rights.\n\nDO NOT TRACK\nPlease note that we do not alter our Site’s data collection and use practices when we see a Do Not Track signal from your browser.\n\nYOUR RIGHTS\nIf you are a European resident, you have the right to access personal information we hold about you and to ask that your personal information be corrected, updated, or deleted. If you would like to exercise this right, please contact us through the contact information below.\n\nidk how that will work tho bc all the info is anonymous ??\n\nCHANGES\nWe may update this privacy policy from time to time in order to reflect, for example, changes to our practices or for other operational, legal or regulatory reasons.\n\nCONTACT US\nFor more information about our privacy practices, if you have questions, or if you would like to make a complaint, please contact us by e-mail at songsingfeedback@gmail.com";
},{}],"DOMB":[function(require,module,exports) {
module.exports="tut.c0e90697.png";
},{}],"KPdx":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./closabledialog"),r=require("./util"),n=require("./privacypolicy"),o=function(t){function o(){var e=t.call(this)||this;return e.dialog.classList.add("dialog-tutorial"),e}return e(o,t),o.prototype.show=function(){var e=this;this.innerHTML="",this.contentContainer.style.userSelect="";var o=r.createElement("h1");o.innerText="Tutorial..";var i=r.createElement("span","link");i.addEventListener("click",function(){e.contentContainer.style.userSelect="text",e.innerText=n.PRIVACYPOLICY,e.contentContainer.scrollTop=0}),i.innerText="learn more";var a=r.createElement("div");a.innerHTML='Hello, you can resize the cropping area by dragging on the "corners" of the circle/square.<br><img src=\''+require("../images/tut.png")+"' class='image'><br>Thank you, this has been the tutorial.<br>Please leave feedback or donate with the links at the bottom!",a.innerHTML+="<br><br><b>also this site use cookie if u use it u agree to cookie ",a.appendChild(i),this.appendChild(o,a),t.prototype.show.call(this)},o}(t.ClosableDialog);exports.TutorialDialog=o;
},{"./closabledialog":"0ggN","./util":"IZ+N","./privacypolicy":"z2EL","../images/tut.png":"DOMB"}],"YLRl":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(o,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(o,e)};return function(o,e){function n(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var o=require("./closabledialog"),e=function(o){function e(){var t=o.call(this)||this;return t.ppl=["Glen Cathey","Betty Glez","Max Abbot","MetalSonicDash","Almxg Levi","Tenkay","PanPan","wtx","and 2 anons:)"],t.dialog.classList.add("dialog-supporters"),t.innerHTML="<h1>Supporters</h1>",t.innerHTML+="Thanks to these people for donating and contributing to my work!!<br><br>",t.innerHTML+=t.ppl.join("<br>"),t.innerHTML+="<br><br>I always ask before publishing a name so just let me know if you'd prefer to stay anonymous!<br>ok thx love u",t}return t(e,o),e}(o.ClosableDialog);exports.SupportersDialog=e;
},{"./closabledialog":"0ggN"}],"B24b":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("./whatsnew"),n=require("./util"),o=require("./eventclass"),i=require("./tutorial"),r=require("./supporters");function d(){e.show()}function l(){e=new i.TutorialDialog,document.body.appendChild(e.container),document.getElementById("link-help").addEventListener("click",function(){d()});var l=new t.WhatsNewDialog;document.getElementById("link-whatsNew").addEventListener("click",function(){l.show()}),document.body.appendChild(l.container),document.getElementById("closeFooter").addEventListener("click",function(){document.getElementById("container").style.height="100%",n.hideElement(document.getElementById("footer")),o.GlobalEvents.emitEvent("resize")});var c=new r.SupportersDialog;document.getElementById("link-supporters").addEventListener("click",function(){c.show()}),document.body.appendChild(c.container)}exports.showTutorial=d,exports.doFooterThings=l;
},{"./whatsnew":"MEyH","./util":"IZ+N","./eventclass":"Topp","./tutorial":"KPdx","./supporters":"YLRl"}],"Ktpg":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./util"),n=require("./eventclass"),r=function(n){function r(e){var r=n.call(this)||this;return r.tempText=null,r.createEvent("drop"),r.createEvent("dragleave"),document.addEventListener("dragover",function(e){e.preventDefault(),e.stopPropagation()}),document.addEventListener("dragend",function(e){e.preventDefault(),e.stopPropagation()}),document.addEventListener("dragenter",function(n){n.preventDefault(),n.stopPropagation(),r.tempText||(r.tempText=e.innerText),t.showElement(e),e.innerText="Drop file",console.log(r.tempText)}),document.addEventListener("dragleave",function(n){n.preventDefault(),n.stopPropagation(),n.target===e&&(t.hideElement(e),e.innerText=r.tempText,r.tempText=null,r.emitEvent("dragleave"))}),document.addEventListener("drop",function(n){n.preventDefault(),n.stopPropagation(),n.dataTransfer.files.length&&r.emitEvent("drop",n.dataTransfer.files[0]),t.hideElement(e),e.innerText=r.tempText,r.tempText=null}),r}return e(r,n),r}(n.EventClass);exports.DragDrop=r;
},{"./util":"IZ+N","./eventclass":"Topp"}],"yjCh":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var i=require("./widget"),n=require("./cropview"),s=require("./previews"),o=require("./util"),r=require("./labeledslider"),a=t(require("./storage")),l=require("./footer"),d=require("./eventclass"),h=require("./dragdrop"),u=require("./point"),p=require("./keymanager"),c=require("./borders"),g=function(t){function i(e){var i=t.call(this,e)||this;i.menuToggle=!0,i.firstOpened=!1,i.settings={previewSizes:[30,40,64,128],maskOpacity:.5,previewMode:"circle",outlinesEnabled:!0,antialias:!0,dismissedTutorial:!1,dismissedIE:!1,dismissedCookie:!1,guidesEnabled:!0,resizeLock:!1,borderSize:.05},i.loadSettings(),c.Border.size=i.settings.borderSize,console.log(i.settings.borderSize),i.constructMenu(),i.cropView=new n.CropView(i.settings),i.previews=new s.Previews(i.cropView),i.appendChild(i.cropView,i.previews),i.settings.previewSizes.forEach(function(e){i.previews.addPreviewSize(new u.Point(e))}),i.previews.on("sizeArrayChange",function(e){i.settings.previewSizes=e,i.saveSettings()}),window.addEventListener("resize",i.handleResize.bind(i)),i.previews.on("sizechange",i.handleResize.bind(i)),d.GlobalEvents.on("resize",i.handleResize.bind(i)),i.cropView.on("antialiaschange",function(e){e?i.antialiasButton.classList.add("toggled"):i.antialiasButton.classList.remove("toggled"),i.settings.antialias=e,i.saveSettings()}),i.handleResize(),i.textOverlay=o.createElement("label","bigOverlay"),i.textOverlay.innerText="Open file",i.textOverlay.style.cursor="pointer",i.textOverlay.setAttribute("for","openInput");var r=new h.DragDrop(i.textOverlay);return r.on("drop",function(e){i.openFile(e)}),r.on("dragleave",function(){i.firstOpened||o.showElement(i.textOverlay)}),i.appendChild(i.textOverlay),!1===o.getIEVersion()||i.settings.dismissedIE||(window.alert("hey so your browser isn't really supported ... things should still work but they will be slower/ugly due to how internet explorer/edge function (They don't conform to web standards). i'd recommend switching to firefox or chrome!! but you don't have to if you don't want to. this is the only time you'll see this message unless u clear ur cache or something. ok bye"),i.settings.dismissedIE=!0,i.saveSettings()),i}return e(i,t),i.prototype.loadFromFile=function(e){this.cropView.setImageFromFile(e)},i.prototype.saveSettings=function(){a.default.set("settings",this.settings)},i.prototype.loadSettings=function(){var e=a.default.get("settings",{});for(var t in this.settings)e.hasOwnProperty(t)&&null!==e[t]&&(this.settings[t]=e[t]);this.saveSettings()},i.prototype.constructMenu=function(){var e=this;this.menu=o.createElement("div","menu");var t=o.createElement("input","openInput show");t.id="openInput",t.type="file",t.addEventListener("change",function(i){t.files&&t.files[0]&&e.openFile(t.files[0])}),this.openFileLabel=o.createElement("label","open half item show"),this.openFileLabel.innerText="Open File...",this.openFileLabel.appendChild(t),this.menu.appendChild(this.openFileLabel),this.toggleMenuButton=o.createElement("button","half item show"),this.toggleMenuButton.setAttribute("uptext","Collapse Menu"),this.toggleMenuButton.setAttribute("downtext","▼"),this.toggleMenuButton.innerText=this.toggleMenuButton.getAttribute("uptext"),this.toggleMenuButton.addEventListener("click",this.toggleMenu.bind(this)),this.menu.appendChild(this.toggleMenuButton);var i=o.createElement("button","open item half");i.innerText="Circle";var n=o.createElement("button","open item half");n.innerText="Squaré",i.addEventListener("click",function(){i.classList.add("toggled"),n.classList.remove("toggled"),e.settings.previewMode="circle",e.cropView&&e.cropView.refresh(),e.saveSettings()}),n.addEventListener("click",function(){i.classList.remove("toggled"),n.classList.add("toggled"),e.settings.previewMode="square",e.cropView&&e.cropView.refresh(),e.saveSettings()}),this.menu.appendChild(i),this.menu.appendChild(n),"circle"===this.settings.previewMode?i.click():n.click();var s=new r.LabelSlider(0,1,.01,"Mask Transparency","item transparency");s.on("slide",this.setTransparency.bind(this)),s.on("change",this.saveSettings.bind(this)),s.value=1-this.settings.maskOpacity,this.menu.appendChild(s.container);var a=o.createElement("div","item zoomBar"),l=o.createElement("div","zoomLabel");l.innerText="Zoom:",a.appendChild(l);var h=o.createElement("button","zoomOut");h.innerText="-",h.addEventListener("click",function(){return e.cropView.zoomOut()});var u=o.createElement("button","zoomIn");u.innerText="+",u.addEventListener("click",function(){return e.cropView.zoomIn()});var p=o.createElement("button","zoomFit");p.innerText="Fit",p.addEventListener("click",function(){return e.cropView.zoomFit()}),a.appendChild(p),a.appendChild(u),a.appendChild(h),this.menu.appendChild(a);var g=new r.LabelSlider(-180,180,1,"Rotation","item rotation");g.on("slide",function(t){Math.abs(t-90)<=2?t=90:Math.abs(t+90)<=2?t=-90:Math.abs(t)<=2?t=0:Math.abs(t-180)<=2?t=180:Math.abs(t+180)<=2&&(t=-180),e.setRotation(t)}),g.value=0,this.menu.appendChild(g.container),this.flipHButton=o.createElement("button","half item"),this.flipHButton.innerText="Flip Horiz.",this.flipHButton.addEventListener("click",this.flipHorizontal.bind(this)),this.menu.appendChild(this.flipHButton),this.flipVButton=o.createElement("button","half item"),this.flipVButton.innerText="Flip Vertical",this.flipVButton.addEventListener("click",this.flipVertical.bind(this)),this.menu.appendChild(this.flipVButton),this.antialiasButton=o.createElement("button","half item"),this.antialiasButton.innerText="Antialias",this.antialiasButton.addEventListener("click",function(){e.cropView.antialias=!e.cropView.antialias}),this.settings.antialias&&this.antialiasButton.classList.add("toggled"),this.menu.appendChild(this.antialiasButton),this.maskOutlineButton=o.createElement("button","half item"),this.maskOutlineButton.innerText="Mask Outline",this.maskOutlineButton.addEventListener("click",this.toggleMaskOutline.bind(this,!0)),this.toggleMaskOutline(!1),this.menu.appendChild(this.maskOutlineButton);var m=o.createElement("button","half item");m.innerText="Add Preview Size",m.addEventListener("click",this.promptAddPreview.bind(this)),this.menu.appendChild(m),this.guidesButton=o.createElement("button","half item"),this.guidesButton.innerText="Guidelines",this.guidesButton.addEventListener("click",this.toggleGuides.bind(this,!0)),this.toggleGuides(!1),this.menu.appendChild(this.guidesButton);var v=o.createElement("button","half item");v.innerText="Center",v.addEventListener("click",this.centerCropArea.bind(this)),this.menu.appendChild(v);var f=o.createElement("button","half item");f.innerText="Set Size",f.addEventListener("click",this.setCropSize.bind(this)),this.menu.appendChild(f);var w=o.createElement("button","item");w.innerText="Lock Center During Resize",w.addEventListener("click",this.toggleResizeLock.bind(this)),this.menu.appendChild(w),d.GlobalEvents.on("resizelockchange",function(){e.settings.resizeLock?w.classList.add("toggled"):w.classList.remove("toggled")}),d.GlobalEvents.emitEvent("resizelockchange");var b=o.createElement("select","item");for(var y in c.Border.types)b.add(o.createOptionElement(c.Border.types[y].text,y));b.addEventListener("change",function(){c.Border.type=b.value}),this.menu.appendChild(b);var E=new r.LabelSlider(0,.5,.01,"Border Size","item");E.value=c.Border.size,E.on("slide",function(e){c.Border.size=e}),E.on("change",function(){e.settings.borderSize=E.value,e.saveSettings()}),this.menu.appendChild(E.container);var z=o.createElement("button","item render show");z.innerText="Render/Save",z.addEventListener("click",this.renderCroppedImage.bind(this)),this.menu.appendChild(z),this.appendChild(this.menu)},i.prototype.flipHorizontal=function(){this.cropView.flipHorizontal()},i.prototype.flipVertical=function(){this.cropView.flipVertical()},i.prototype.centerCropArea=function(){this.cropView.centerCropArea()},i.prototype.setCropSize=function(){var e="The current picture is "+this.cropView.innerSize.x.toString()+"x"+this.cropView.innerSize.y.toString()+"\nThe current croparea is "+this.cropView.cropArea.width+"x"+this.cropView.cropArea.height+"\nEnter in a size either by specifying a number (like 64) or a percentage of width (50%w) or height (50%h)",t=window.prompt(e);if(null!==t&&!isNaN(parseInt(t))){var i=parseInt(t);t.endsWith("%w")?i=this.cropView.innerSize.x*(i/100):t.endsWith("%h")&&(i=this.cropView.innerSize.y*(i/100)),this.cropView.setCropSize(i)}},i.prototype.toggleResizeLock=function(){this.settings.resizeLock=!this.settings.resizeLock,this.saveSettings(),d.GlobalEvents.emitEvent("resizelockchange")},i.prototype.toggleMenu=function(){this.menuToggle?(Array.from(this.menu.children).forEach(function(e){e.classList.contains("show")||(e.style.display="none")}),this.toggleMenuButton.classList.add("toggled"),this.toggleMenuButton.innerText=this.toggleMenuButton.getAttribute("downtext")):(Array.from(this.menu.children).forEach(function(e){e.style.display=""}),this.toggleMenuButton.classList.remove("toggled"),this.toggleMenuButton.innerText=this.toggleMenuButton.getAttribute("uptext")),this.menuToggle=!this.menuToggle},i.prototype.renderCroppedImage=function(){this.cropView.renderCroppedImage()},i.prototype.toggleMaskOutline=function(e){void 0===e&&(e=!0),e&&(this.settings.outlinesEnabled=!this.settings.outlinesEnabled),this.settings.outlinesEnabled?this.maskOutlineButton.classList.add("toggled"):this.maskOutlineButton.classList.remove("toggled"),this.cropView&&this.cropView.refresh(),this.saveSettings()},i.prototype.toggleGuides=function(e){void 0===e&&(e=!0),e&&(this.settings.guidesEnabled=!this.settings.guidesEnabled),this.settings.guidesEnabled?this.guidesButton.classList.add("toggled"):this.guidesButton.classList.remove("toggled"),this.cropView&&this.cropView.refresh(),this.saveSettings()},i.prototype.setTransparency=function(e){this.settings.maskOpacity=1-e,this.cropView.refresh()},i.prototype.setRotation=function(e){this.cropView.rotate(e)},i.prototype.promptAddPreview=function(){var e=window.prompt("Enter a custom size\nDefault sizes are 30, 40, 64, and 128\nNote: 30 will come with a discord online indicator");if(null!==e){var t=parseInt(e);isNaN(t)||t<=0?alert("Bad size make sure it's a number over 0"):this.previews.addPreviewSize(new u.Point(t))}},i.prototype.openFile=function(e){this.cropView.setImageFromFile(e)&&(this.firstOpened||(this.firstOpened=!0,this.show(),o.hideElement(this.textOverlay),this.textOverlay.removeAttribute("for"),this.textOverlay.style.cursor=""),"gif"===this.cropView.currentFileType?(o.hideElement(this.flipHButton),o.hideElement(this.flipVButton)):(o.showElement(this.flipHButton),o.showElement(this.flipVButton)),this.settings.dismissedTutorial&&this.settings.dismissedCookie||(l.showTutorial(),this.settings.dismissedTutorial=!0,this.settings.dismissedCookie=!0,this.saveSettings()))},i.prototype.handleResize=function(){var e=Math.max(this.previews.width,this.menu.getBoundingClientRect().width);this.cropView.container.style.width="calc(100% - "+e+"px)",this.cropView.reactTMToRefresh();this.previews.height,this.previews.padding},i}(i.Widget);exports.AvatarCropper=g,window.addEventListener("load",function(){p.KeyManager.initialize(),window.a=new g(document.getElementById("container")),l.doFooterThings()});
},{"./widget":"rcaU","./cropview":"4oNT","./previews":"C3jq","./util":"IZ+N","./labeledslider":"7caX","./storage":"oWGo","./footer":"B24b","./eventclass":"Topp","./dragdrop":"Ktpg","./point":"mHi6","./keymanager":"g9Wi","./borders":"UvFA"}]},{},["yjCh"], null)
//# sourceMappingURL=avatarcropper.6293e470.js.map